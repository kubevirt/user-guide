
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for KubeVirt">
      
      
      
        <link rel="canonical" href="https://kubevirt.io/user-guide/architecture/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../quickstarts/">
      
      
      <link rel="icon" href="../assets/favicon32x32.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Architecture - KubeVirt user guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="KubeVirt user guide" class="md-header__button md-logo" aria-label="KubeVirt user guide" data-md-component="logo">
      
  <img src="../assets/KubeVirt_icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KubeVirt user guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Architecture
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Architecture

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../quickstarts/" class="md-tabs__link">
        
  
  
    
  
  Quickstarts

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../cluster_admin/installation/" class="md-tabs__link">
          
  
  
  Cluster Administration

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../user_workloads/lifecycle/" class="md-tabs__link">
          
  
  
  User Workloads

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../compute/client_passthrough/" class="md-tabs__link">
          
  
  
  Compute

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../network/dns/" class="md-tabs__link">
          
  
  
  Network

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../storage/clone_api/" class="md-tabs__link">
          
  
  
  Storage

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../release_notes/" class="md-tabs__link">
        
  
  
    
  
  Release Notes

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../debug_virt_stack/debug/" class="md-tabs__link">
          
  
  
  Virtualization Debugging

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="KubeVirt user guide" class="md-nav__button md-logo" aria-label="KubeVirt user guide" data-md-component="logo">
      
  <img src="../assets/KubeVirt_icon.png" alt="logo">

    </a>
    KubeVirt user guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stack" class="md-nav__link">
    <span class="md-ellipsis">
      Stack
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-services" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Services
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Application Layout
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#native-workloads" class="md-nav__link">
    <span class="md-ellipsis">
      Native Workloads
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-razor" class="md-nav__link">
    <span class="md-ellipsis">
      The Razor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtualmachine" class="md-nav__link">
    <span class="md-ellipsis">
      VirtualMachine
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use-a-virtualmachine" class="md-nav__link">
    <span class="md-ellipsis">
      How to use a VirtualMachine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to use a VirtualMachine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-and-stopping" class="md-nav__link">
    <span class="md-ellipsis">
      Starting and stopping
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller-status" class="md-nav__link">
    <span class="md-ellipsis">
      Controller status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restarting" class="md-nav__link">
    <span class="md-ellipsis">
      Restarting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fencing-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Fencing considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposing-as-a-service" class="md-nav__link">
    <span class="md-ellipsis">
      Exposing as a Service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-to-use-a-virtualmachine" class="md-nav__link">
    <span class="md-ellipsis">
      When to use a VirtualMachine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="When to use a VirtualMachine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-api-stability-is-required-between-restarts" class="md-nav__link">
    <span class="md-ellipsis">
      When API stability is required between restarts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-config-updates-should-be-picked-up-on-the-next-restart" class="md-nav__link">
    <span class="md-ellipsis">
      When config updates should be picked up on the next restart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-you-want-to-let-the-cluster-manage-your-individual-virtualmachineinstance" class="md-nav__link">
    <span class="md-ellipsis">
      When you want to let the cluster manage your individual VirtualMachineInstance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubectl-commandline-interactions" class="md-nav__link">
    <span class="md-ellipsis">
      Kubectl commandline interactions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstarts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstarts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cluster Administration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Cluster Administration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/updating_and_deletion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Updating and deletion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/activating_feature_gates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Activating feature gates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/annotations_and_labels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Annotations and labels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/api_validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authorization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/confidential_computing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Confidential computing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/customize_components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Customize components
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/gitops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managing KubeVirt with GitOps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/ksm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KSM Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/migration_policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration Policies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/node_maintenance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node maintenance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/scheduler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KubeVirt Scheduler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/tekton_tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KubeVirt Tekton
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/unresponsive_nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unresponsive nodes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_16" >
        
          
          <label class="md-nav__link" for="__nav_4_16" id="__nav_4_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ARM cluster
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_16">
            <span class="md-nav__icon md-icon"></span>
            ARM cluster
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/device_status_on_Arm64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Device Status on Arm64
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/feature_gate_status_on_Arm64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature Gate Status on Arm64
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/operations_on_Arm64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arm64 Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cluster_admin/virtual_machines_on_Arm64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Machines on Arm64
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Workloads
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            User Workloads
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lifecycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/basic_use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic use
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/creating_vms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating VirtualMachines by using virtctl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/creating_it_pref/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating Instance Types and Preferences by using virtctl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/virtctl_client_tool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download and Install the virtctl Command Line Interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/accessing_virtual_machines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accessing Virtual Machines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/boot_from_external_source/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Booting From External Source
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/startup_scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Startup Scripts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/windows_virtio_drivers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows virtio drivers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/legacy_windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running legacy Windows versions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_11" >
        
          
          <label class="md-nav__link" for="__nav_5_11" id="__nav_5_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Monitoring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_11">
            <span class="md-nav__icon md-icon"></span>
            Monitoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/component_monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Component monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/guest_agent_information/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guest Agent information
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/guest_operating_system_information/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guest Operating System Information
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/liveness_and_readiness_probes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Liveness and Readiness Probes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_12" >
        
          
          <label class="md-nav__link" for="__nav_5_12" id="__nav_5_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Workloads
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_12">
            <span class="md-nav__icon md-icon"></span>
            Workloads
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/instancetypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instance types and preferences
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/deploy_common_instancetypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploy common-instancetypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/hook-sidecar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hook Sidecar Container
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/presets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Presets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/pool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VirtualMachinePool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/replicaset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VirtualMachineInstanceReplicaSet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/virtual_machine_instances/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Machines Instances
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_workloads/vm_rollout_strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VM Rollout Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Compute
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Compute
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/client_passthrough/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client Passthrough
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/cpu_hotplug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CPU Hotplug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/dedicated_cpu_resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dedicated CPU resources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/host-devices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Host Devices Assignment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/hugepages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hugepages support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/live_migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Live Migration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/mediated_devices_configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mediated devices and virtual GPUs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/memory_hotplug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory Hotplug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/node_assignment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node assignment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/node_overcommit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node overcommit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/numa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NUMA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/persistent_tpm_and_uefi_state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Persistent TPM and UEFI state
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/resources_requests_and_limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resources requests and limits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/run_strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/virtual_hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual hardware
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/memory_dump/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual machine memory dump
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compute/vsock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSOCK
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network/dns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DNS records
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network/hotplug_interfaces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hotplug Network Interfaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network/interfaces_and_networks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interfaces and Networks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network/istio_service_mesh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Istio service mesh
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network/network_binding_plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Binding Plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network/networkpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NetworkPolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network/service_objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service objects
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Storage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/clone_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clone API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/containerized_data_importer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Containerized Data Importer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/disks_and_volumes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filesystems, Disks and Volumes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/export_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Export API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/guestfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage of libguestfs-tools and virtctl guestfs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/hotplug_volumes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hotplug Volumes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/snapshot_restore_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Snapshot Restore API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/volume_migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update volume strategy and volume migration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../release_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Virtualization Debugging
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Virtualization Debugging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug_virt_stack/debug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug_virt_stack/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control libvirt logging for each component
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug_virt_stack/privileged-node-debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Privileged debugging on the node
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug_virt_stack/virsh-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execute virsh commands in virt-launcher pod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug_virt_stack/launch-qemu-strace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launch QEMU with strace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug_virt_stack/launch-qemu-gdb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launch QEMU with gdb and connect locally with gdb client
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stack" class="md-nav__link">
    <span class="md-ellipsis">
      Stack
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-services" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Services
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Application Layout
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#native-workloads" class="md-nav__link">
    <span class="md-ellipsis">
      Native Workloads
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-razor" class="md-nav__link">
    <span class="md-ellipsis">
      The Razor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#virtualmachine" class="md-nav__link">
    <span class="md-ellipsis">
      VirtualMachine
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use-a-virtualmachine" class="md-nav__link">
    <span class="md-ellipsis">
      How to use a VirtualMachine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to use a VirtualMachine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-and-stopping" class="md-nav__link">
    <span class="md-ellipsis">
      Starting and stopping
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller-status" class="md-nav__link">
    <span class="md-ellipsis">
      Controller status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restarting" class="md-nav__link">
    <span class="md-ellipsis">
      Restarting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fencing-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Fencing considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposing-as-a-service" class="md-nav__link">
    <span class="md-ellipsis">
      Exposing as a Service
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-to-use-a-virtualmachine" class="md-nav__link">
    <span class="md-ellipsis">
      When to use a VirtualMachine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="When to use a VirtualMachine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-api-stability-is-required-between-restarts" class="md-nav__link">
    <span class="md-ellipsis">
      When API stability is required between restarts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-config-updates-should-be-picked-up-on-the-next-restart" class="md-nav__link">
    <span class="md-ellipsis">
      When config updates should be picked up on the next restart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-you-want-to-let-the-cluster-manage-your-individual-virtualmachineinstance" class="md-nav__link">
    <span class="md-ellipsis">
      When you want to let the cluster manage your individual VirtualMachineInstance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubectl-commandline-interactions" class="md-nav__link">
    <span class="md-ellipsis">
      Kubectl commandline interactions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  



  
    <a href="https://github.com/kubevirt/user-guide/edit/main/docs/architecture.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/kubevirt/user-guide/raw/main/docs/architecture.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h1>
<p>KubeVirt is built using a service oriented architecture and a choreography
pattern.</p>
<h2 id="stack">Stack<a class="headerlink" href="#stack" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>  +---------------------+
  | KubeVirt            |
~~+---------------------+~~
  | Orchestration (K8s) |
  +---------------------+
  | Scheduling (K8s)    |
  +---------------------+
  | Container Runtime   |
~~+---------------------+~~
  | Operating System    |
  +---------------------+
  | Virtual(kvm)        |
~~+---------------------+~~
  | Physical            |
  +---------------------+
</code></pre></div>
<p>Users requiring virtualization services are speaking to the Virtualization API
(see below) which in turn is speaking to the Kubernetes cluster to schedule
requested Virtual Machine Instances (VMIs). Scheduling, networking, and storage 
are all delegated to Kubernetes, while KubeVirt provides the virtualization functionality.</p>
<h2 id="additional-services">Additional Services<a class="headerlink" href="#additional-services" title="Permanent link">&para;</a></h2>
<p>KubeVirt provides additional functionality to your Kubernetes cluster,
to perform virtual machine management</p>
<p>If we recall how Kubernetes is handling Pods, then we remember that Pods are
created by posting a Pod specification to the Kubernetes API Server.
This specification is then transformed into an object inside the API Server,
this object is of a specific type or <em>kind</em> - that is how it's called in the
specification.
A Pod is of the type <code>Pod</code>. Controllers within Kubernetes know how to handle
these Pod objects. Thus once a new Pod object is seen, those controllers
perform the necessary actions to bring the Pod alive, and to match the
required state.</p>
<p>This same mechanism is used by KubeVirt. Thus KubeVirt delivers three things
to provide the new functionality:</p>
<ol>
<li>Additional types - so called <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/">Custom Resource Definition</a> (CRD) - are added to the Kubernetes API</li>
<li>Additional controllers for cluster wide logic associated with these new types</li>
<li>Additional daemons for node specific logic associated with new types</li>
</ol>
<p>Once all three steps have been completed, you are able to</p>
<ul>
<li>create new objects of these new types in Kubernetes (VMIs in our
  case)</li>
<li>and the new controllers take care to get the VMIs scheduled on some host,</li>
<li>and a daemon - the <code>virt-handler</code> - is taking care of a host - alongside the
  <code>kubelet</code> - to launch the VMI and configure it until it matches the required
  state.</li>
</ul>
<p>One final note; both controllers and daemons are running as Pods (or similar)
<em>on top of</em> the Kubernetes cluster, and are not installed alongside it. The type
is - as said before - even defined inside the Kubernetes API server. This allows
users to speak to Kubernetes, but modify VMIs.</p>
<p>The following diagram illustrates how the additional controllers and daemons
communicate with Kubernetes and where the additional types are stored:</p>
<p><img alt="Architecture diagram" src="../assets/architecture.png" title="Architecture" /></p>
<p>And a simplified version:</p>
<p><img alt="Simplified architecture diagram" src="../assets/architecture-simple.png" title="Simplified architecture" /></p>
<h2 id="application-layout">Application Layout<a class="headerlink" href="#application-layout" title="Permanent link">&para;</a></h2>
<ul>
<li>Cluster</li>
<li>KubeVirt Components<ul>
<li>virt-controller</li>
<li>virt-handler</li>
<li>libvirtd</li>
<li></li>
</ul>
</li>
<li>KubeVirt Managed Pods<ul>
<li>VMI Foo</li>
<li>VMI Bar</li>
<li></li>
</ul>
</li>
<li>KubeVirt Custom Resources<ul>
<li>VirtualMachine (VM) Foo
    -&gt; VirtualMachineInstance (VMI) Foo</li>
<li>VirtualMachineInstanceReplicaSet (VMIRS) Bar
    -&gt; VirtualMachineInstance (VMI) Bar</li>
</ul>
</li>
</ul>
<p>VirtualMachineInstance (VMI) is the custom resource that represents the basic ephemeral building block of an instance.
In a lot of cases this object won't be created directly by the user but by a high level resource.
High level resources for VMI can be:</p>
<ul>
<li>VirtualMachine (VM) - StateFul VM that can be stopped and started while keeping the VM data and state.</li>
<li>VirtualMachineInstanceReplicaSet (VMIRS) - Similar to pods ReplicaSet, a group of ephemeral VMIs with similar configuration defined in a template.</li>
</ul>
<h2 id="native-workloads">Native Workloads<a class="headerlink" href="#native-workloads" title="Permanent link">&para;</a></h2>
<p>KubeVirt is deployed on top of a Kubernetes cluster.
This means that you can continue to run your Kubernetes-native workloads next
to the VMIs managed through KubeVirt.</p>
<p>Furthermore: if you can run native workloads, and you have KubeVirt installed,
you should be able to run VM-based workloads, too.
For example, Application Operators should not require additional permissions
to use cluster features for VMs, compared to using that feature with a plain Pod.</p>
<p>Security-wise, installing and using KubeVirt must not grant users any permission
they do not already have regarding native workloads. For example, a non-privileged
Application Operator must never gain access to a privileged Pod by using a KubeVirt
feature.</p>
<h2 id="the-razor">The Razor<a class="headerlink" href="#the-razor" title="Permanent link">&para;</a></h2>
<p>We love virtual machines, think that they are very important and work hard to make
them easy to use in Kubernetes. But even more than VMs, we love good design
and modular, reusable components.
Quite frequently, we face a dilemma: should we solve a problem in KubeVirt in a
way that is best optimized for VMs, or should we take a longer path and introduce
the solution to Pod-based workloads too?</p>
<p>To decide these dilemmas we came up with the <strong>KubeVirt Razor</strong>:
"If something is useful for Pods, we should not implement it only for VMs".</p>
<p>For example, we debated how we should connect VMs to external network
resources. The quickest way seems to introduce KubeVirt-specific code,
attaching a VM to a host bridge.
However, we chose the longer path of integrating with <a href="https://github.com/intel/multus-cni">Multus</a>
and <a href="https://github.com/containernetworking">CNI</a> and improving them.</p>
<h2 id="virtualmachine">VirtualMachine<a class="headerlink" href="#virtualmachine" title="Permanent link">&para;</a></h2>
<p>A <code>VirtualMachine</code> provides additional management capabilities to a
VirtualMachineInstance inside the cluster. That includes:</p>
<ul>
<li>
<p>API stability</p>
</li>
<li>
<p>Start/stop/restart capabilities on the controller level</p>
</li>
<li>
<p>Offline configuration change with propagation on
    VirtualMachineInstance recreation</p>
</li>
<li>
<p>Ensure that the VirtualMachineInstance is running if it should be
    running</p>
</li>
</ul>
<p>It focuses on a 1:1 relationship between the controller instance and a
virtual machine instance. In many ways it is very similar to a
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/">StatefulSet</a>
with <code>spec.replica</code> set to <code>1</code>.</p>
<h2 id="how-to-use-a-virtualmachine">How to use a VirtualMachine<a class="headerlink" href="#how-to-use-a-virtualmachine" title="Permanent link">&para;</a></h2>
<p>A VirtualMachine will make sure that a VirtualMachineInstance object
with an identical name will be present in the cluster when the VirtualMachine
is in a Running state, which is controlled via the <code>spec.runStrategy</code> field.
For more information regarding Run Strategies, please refer to <a href="../compute/run_strategies/">Run Strategies</a></p>
<h3 id="starting-and-stopping">Starting and stopping<a class="headerlink" href="#starting-and-stopping" title="Permanent link">&para;</a></h3>
<p>Virtual Machines can be turned on/off in an imperative or a declarative manner.
Setting a <code>spec.runStrategy</code> like <code>Always</code> or <code>Halted</code> means that the system will continuously
try to ensure the Virtual Machine is turned on/off:</p>
<div class="highlight"><pre><span></span><code># Start the virtual machine:
kubectl patch virtualmachine vm --type merge -p \
    &#39;{&quot;spec&quot;:{&quot;runStrategy&quot;: &quot;Always&quot;}}&#39;

# Stop the virtual machine:
kubectl patch virtualmachine vm --type merge -p \
    &#39;{&quot;spec&quot;:{&quot;runStrategy&quot;: &quot;Halted&quot;}}&#39;
</code></pre></div>
<p>However, with the <code>Manual</code> <code>runStrategy</code>, the user would imperatively choose when to turn
the VM on or off, without the system performing any automatic actions:</p>
<div class="highlight"><pre><span></span><code># Start the virtual machine:
virtctl start vm

# Stop the virtual machine:
virtctl stop vm
</code></pre></div>
<p>Find more details about <a href="../user_workloads/lifecycle/">a VM's life-cycle in the relevant section</a></p>
<h3 id="controller-status">Controller status<a class="headerlink" href="#controller-status" title="Permanent link">&para;</a></h3>
<p>Once a VirtualMachineInstance is created, its state will be tracked via
<code>status.created</code> and <code>status.ready</code> fields of the VirtualMachine. If a
VirtualMachineInstance exists in the cluster, <code>status.created</code> will equal
<code>true</code>. If the VirtualMachineInstance is also ready, <code>status.ready</code> will
equal <code>true</code> too.</p>
<p>If a VirtualMachineInstance reaches a final state but the <code>spec.running</code>
equals <code>true</code>, the VirtualMachine controller will set <code>status.ready</code> to
<code>false</code> and re-create the VirtualMachineInstance.</p>
<p>Additionally, the <code>status.printableStatus</code> field provides high-level summary
information about the state of the VirtualMachine. This information is also displayed
when listing VirtualMachines using the CLI:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$ kubectl get virtualmachines
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>NAME     AGE   STATUS    VOLUME
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>vm1      4m    Running
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>vm2      11s   Stopped
</code></pre></div>
<p>Here's the list of states currently supported and their meanings.
Note that states may be added/removed in future releases, so caution
should be used if consumed by automated programs.</p>
<ul>
<li><strong>Stopped</strong>: The virtual machine is currently stopped and isn't expected to start.</li>
<li><strong>Provisioning</strong>: Cluster resources associated with the virtual machine (e.g., DataVolumes) are being provisioned and prepared.</li>
<li><strong>Starting</strong>: The virtual machine is being prepared for running.</li>
<li><strong>Running</strong>: The virtual machine is running.</li>
<li><strong>Paused</strong>: The virtual machine is paused.</li>
<li><strong>Migrating</strong>: The virtual machine is in the process of being migrated to another host.</li>
<li><strong>Stopping</strong>: The virtual machine is in the process of being stopped.</li>
<li><strong>Terminating</strong>: The virtual machine is in the process of deletion, as well as its associated resources (VirtualMachineInstance, DataVolumes, ).</li>
<li><strong>Unknown</strong>: The state of the virtual machine could not be obtained, typically due to an error in communicating with the host on which it's running.</li>
</ul>
<h3 id="restarting">Restarting<a class="headerlink" href="#restarting" title="Permanent link">&para;</a></h3>
<p>A VirtualMachineInstance restart can be triggered by deleting the
VirtualMachineInstance. This will also propagate configuration changes
from the template in the VirtualMachine:</p>
<div class="highlight"><pre><span></span><code># Restart the virtual machine (you delete the instance!):
kubectl delete virtualmachineinstance vm
</code></pre></div>
<p>To restart a VirtualMachine named vm using virtctl:</p>
<div class="highlight"><pre><span></span><code>$ virtctl restart vm
</code></pre></div>
<p>This would perform a normal restart for the VirtualMachineInstance and
would reschedule the VirtualMachineInstance on a new virt-launcher Pod</p>
<p>To force restart a VirtualMachine named vm using virtctl:</p>
<div class="highlight"><pre><span></span><code>$ virtctl restart vm --force --grace-period=0
</code></pre></div>
<p>This would try to perform a normal restart, and would also delete the
virt-launcher Pod of the VirtualMachineInstance with setting
GracePeriodSeconds to the seconds passed in the command.</p>
<p>Currently, only setting grace-period=0 is supported.</p>
<div class="admonition warning">
<p class="admonition-title">Note</p>
<p>Force restart can cause data corruption, and should be used in cases of
kernel panic or VirtualMachine being unresponsive to normal restarts.</p>
</div>
<h3 id="fencing-considerations">Fencing considerations<a class="headerlink" href="#fencing-considerations" title="Permanent link">&para;</a></h3>
<p>A VirtualMachine will never restart or re-create a
VirtualMachineInstance until the current instance of the
VirtualMachineInstance is deleted from the cluster.</p>
<h3 id="exposing-as-a-service">Exposing as a Service<a class="headerlink" href="#exposing-as-a-service" title="Permanent link">&para;</a></h3>
<p>A VirtualMachine can be exposed as a service. The actual service will be
available once the VirtualMachineInstance starts without additional
interaction.</p>
<p>For example, exposing SSH port (22) as a <code>ClusterIP</code> service using <code>virtctl</code>
after the VirtualMachine was created, but before it started:</p>
<div class="highlight"><pre><span></span><code>$ virtctl expose virtualmachine vmi-ephemeral --name vmiservice --port 27017 --target-port 22
</code></pre></div>
<p>All service exposure options that apply to a VirtualMachineInstance apply to a VirtualMachine.</p>
<p>See <a href="../network/service_objects/">Service Objects</a> for more details.</p>
<h2 id="when-to-use-a-virtualmachine">When to use a VirtualMachine<a class="headerlink" href="#when-to-use-a-virtualmachine" title="Permanent link">&para;</a></h2>
<h3 id="when-api-stability-is-required-between-restarts">When API stability is required between restarts<a class="headerlink" href="#when-api-stability-is-required-between-restarts" title="Permanent link">&para;</a></h3>
<p>A <code>VirtualMachine</code> makes sure that VirtualMachineInstance API
configurations are consistent between restarts. A classical example are
licenses which are bound to the firmware UUID of a virtual machine. The
<code>VirtualMachine</code> makes sure that the UUID will always stay the same
without the user having to take care of it.</p>
<p>One of the main benefits is that a user can still make use of defaulting
logic, although a stable API is needed.</p>
<h3 id="when-config-updates-should-be-picked-up-on-the-next-restart">When config updates should be picked up on the next restart<a class="headerlink" href="#when-config-updates-should-be-picked-up-on-the-next-restart" title="Permanent link">&para;</a></h3>
<p>If the VirtualMachineInstance configuration should be modifiable inside
the cluster and these changes should be picked up on the next
VirtualMachineInstance restart. This means that no hotplug is involved.</p>
<h3 id="when-you-want-to-let-the-cluster-manage-your-individual-virtualmachineinstance">When you want to let the cluster manage your individual VirtualMachineInstance<a class="headerlink" href="#when-you-want-to-let-the-cluster-manage-your-individual-virtualmachineinstance" title="Permanent link">&para;</a></h3>
<p>Kubernetes as a declarative system can help you to manage the
VirtualMachineInstance. You tell it that you want this
VirtualMachineInstance with your application running, the VirtualMachine
will try to make sure it stays running.</p>
<div class="admonition info">
<p class="admonition-title">Note</p>
<p>The current belief is that if it is defined that the
VirtualMachineInstance should be running, it should be running. This is
different from many classical virtualization platforms, where VMs stay
down if they were switched off. Restart policies may be added if needed.
Please provide your use-case if you need this!</p>
</div>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubevirt.io/v1</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VirtualMachine</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="nt">kubevirt.io/vm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vm-cirros</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vm-cirros</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span><span class="nt">runStrategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Halted</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">        </span><span class="nt">kubevirt.io/vm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vm-cirros</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">      </span><span class="nt">domain</span><span class="p">:</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">        </span><span class="nt">devices</span><span class="p">:</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">          </span><span class="nt">disks</span><span class="p">:</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">disk</span><span class="p">:</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">              </span><span class="nt">bus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">virtio</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">containerdisk</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">disk</span><span class="p">:</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">              </span><span class="nt">bus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">virtio</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cloudinitdisk</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">        </span><span class="nt">machine</span><span class="p">:</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">        </span><span class="nt">resources</span><span class="p">:</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">          </span><span class="nt">requests</span><span class="p">:</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">64M</span>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">      </span><span class="nt">terminationGracePeriodSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">      </span><span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">containerdisk</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">        </span><span class="nt">containerDisk</span><span class="p">:</span>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubevirt/cirros-container-disk-demo:latest</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cloudInitNoCloud</span><span class="p">:</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">          </span><span class="nt">userDataBase64</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IyEvYmluL3NoCgplY2hvICdwcmludGVkIGZyb20gY2xvdWQtaW5pdCB1c2VyZGF0YScK</span>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cloudinitdisk</span>
</code></pre></div>
<p>Saving this manifest into <code>vm.yaml</code> and submitting it to Kubernetes will
create the controller instance:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>$ kubectl create -f vm.yaml
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>virtualmachine &quot;vm-cirros&quot; created
</code></pre></div>
<p>Since <code>spec.running</code> is set to <code>false</code>, no vmi will be created:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$ kubectl get vmis
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>No resources found.
</code></pre></div>
<p>Let's start the VirtualMachine:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$ virtctl start vm vm-cirros
</code></pre></div>
<p>As expected, a VirtualMachineInstance called <code>vm-cirros</code> got created:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>$ kubectl describe vm vm-cirros
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Name:         vm-cirros
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>Namespace:    default
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>Labels:       kubevirt.io/vm=vm-cirros
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>Annotations:  &lt;none&gt;
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>API Version:  kubevirt.io/v1
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>Kind:         VirtualMachine
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>Metadata:
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>  Cluster Name:
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>  Creation Timestamp:  2018-04-30T09:25:08Z
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>  Generation:          0
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>  Resource Version:    6418
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>  Self Link:           /apis/kubevirt.io/v1/namespaces/default/virtualmachines/vm-cirros
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>  UID:                 60043358-4c58-11e8-8653-525500d15501
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>Spec:
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>  Running:  true
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>  Template:
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>    Metadata:
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>      Creation Timestamp:  &lt;nil&gt;
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>      Labels:
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>        Kubevirt . Io / Ovmi:  vm-cirros
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>    Spec:
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>      Domain:
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>        Devices:
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>          Disks:
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>            Disk:
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>              Bus:        virtio
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>            Name:         containerdisk
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>            Volume Name:  containerdisk
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>            Disk:
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>              Bus:        virtio
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>            Name:         cloudinitdisk
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a>            Volume Name:  cloudinitdisk
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a>        Machine:
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>          Type:
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>        Resources:
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a>          Requests:
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>            Memory:                      64M
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>      Termination Grace Period Seconds:  0
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a>      Volumes:
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a>        Name:  containerdisk
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>        Registry Disk:
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a>          Image:  kubevirt/cirros-registry-disk-demo:latest
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a>        Cloud Init No Cloud:
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a>          User Data Base 64:  IyEvYmluL3NoCgplY2hvICdwcmludGVkIGZyb20gY2xvdWQtaW5pdCB1c2VyZGF0YScK
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a>        Name:                 cloudinitdisk
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a>Status:
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>  Created:  true
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a>  Ready:    true
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a>Events:
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a>  Type    Reason            Age   From                              Message
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a>  ----    ------            ----  ----                              -------
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a>  Normal  SuccessfulCreate  15s   virtualmachine-controller  Created virtual machine: vm-cirros
</code></pre></div>
<h3 id="kubectl-commandline-interactions">Kubectl commandline interactions<a class="headerlink" href="#kubectl-commandline-interactions" title="Permanent link">&para;</a></h3>
<p>Whenever you want to manipulate the VirtualMachine through the
commandline you can use the kubectl command. The following are examples
demonstrating how to do it.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>    # Define a virtual machine:
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    kubectl create -f vm.yaml
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    # Start the virtual machine:
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    kubectl patch virtualmachine vm --type merge -p \
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>        &#39;{&quot;spec&quot;:{&quot;runStrategy&quot;:&quot;Always&quot;}}&#39;
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    # Look at virtual machine status and associated events:
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>    kubectl describe virtualmachine vm
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>    # Look at the now created virtual machine instance status and associated events:
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>    kubectl describe virtualmachineinstance vm
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>    # Stop the virtual machine instance:
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>    kubectl patch virtualmachine vm --type merge -p \
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>        &#39;{&quot;spec&quot;:{&quot;runStrategy&quot;:&quot;Halted&quot;}}&#39;
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>    # Restart the virtual machine (you delete the instance!):
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>    kubectl delete virtualmachineinstance vm
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>    # Implicit cascade delete (first deletes the virtual machine and then the virtual machine instance)
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>    kubectl delete virtualmachine vm
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>    # Explicit cascade delete (first deletes the virtual machine and then the virtual machine instance)
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>    kubectl delete virtualmachine vm --cascade=true
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>    # Orphan delete (The running virtual machine is only detached, not deleted)
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>    # Recreating the virtual machine would lead to the adoption of the virtual machine instance
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>    kubectl delete virtualmachine vm --cascade=false
</code></pre></div>







  
  




  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Welcome">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Welcome
              </div>
            </div>
          </a>
        
        
          
          <a href="../quickstarts/" class="md-footer__link md-footer__link--next" aria-label="Next: Quickstarts">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Quickstarts
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "content.action.view", "content.action.edit"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>
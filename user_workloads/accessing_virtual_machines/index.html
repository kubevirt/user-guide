
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for KubeVirt">
      
      
      
        <link rel="canonical" href="https://kubevirt.io/user-guide/user_workloads/accessing_virtual_machines/">
      
      
        <link rel="prev" href="../virtctl_client_tool/">
      
      
        <link rel="next" href="../boot_from_external_source/">
      
      
      <link rel="icon" href="../../assets/favicon32x32.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Accessing Virtual Machines - KubeVirt user guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#accessing-virtual-machines" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="KubeVirt user guide" class="md-header__button md-logo" aria-label="KubeVirt user guide" data-md-component="logo">
      
  <img src="../../assets/KubeVirt_icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KubeVirt user guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Accessing Virtual Machines
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../architecture/" class="md-tabs__link">
        
  
  
    
  
  Architecture

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../quickstarts/" class="md-tabs__link">
        
  
  
    
  
  Quickstarts

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cluster_admin/installation/" class="md-tabs__link">
          
  
  
  Cluster Administration

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../lifecycle/" class="md-tabs__link">
          
  
  
  User Workloads

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../compute/client_passthrough/" class="md-tabs__link">
          
  
  
  Compute

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../network/dns/" class="md-tabs__link">
          
  
  
  Network

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../storage/clone_api/" class="md-tabs__link">
          
  
  
  Storage

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../release_notes/" class="md-tabs__link">
        
  
  
    
  
  Release Notes

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../debug_virt_stack/debug/" class="md-tabs__link">
          
  
  
  Virtualization Debugging

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="KubeVirt user guide" class="md-nav__button md-logo" aria-label="KubeVirt user guide" data-md-component="logo">
      
  <img src="../../assets/KubeVirt_icon.png" alt="logo">

    </a>
    KubeVirt user guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstarts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstarts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cluster Administration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Cluster Administration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/updating_and_deletion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Updating and deletion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/activating_feature_gates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Activating feature gates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/annotations_and_labels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Annotations and labels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/api_validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authorization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/confidential_computing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Confidential computing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/customize_components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Customize components
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/gitops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managing KubeVirt with GitOps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/ksm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KSM Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/migration_policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration Policies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/node_maintenance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node maintenance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/scheduler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KubeVirt Scheduler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/tekton_tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    KubeVirt Tekton
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/unresponsive_nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unresponsive nodes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_16" >
        
          
          <label class="md-nav__link" for="__nav_4_16" id="__nav_4_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ARM cluster
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_16">
            <span class="md-nav__icon md-icon"></span>
            ARM cluster
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/device_status_on_Arm64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Device Status on Arm64
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/feature_gate_status_on_Arm64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feature Gate Status on Arm64
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/operations_on_Arm64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arm64 Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster_admin/virtual_machines_on_Arm64/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Machines on Arm64
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User Workloads
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            User Workloads
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lifecycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basic_use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic use
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating_vms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating VirtualMachines by using virtctl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating_it_pref/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating Instance Types and Preferences by using virtctl
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../virtctl_client_tool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download and Install the virtctl Command Line Interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Accessing Virtual Machines
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Accessing Virtual Machines
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#graphical-and-serial-console-access" class="md-nav__link">
    <span class="md-ellipsis">
      Graphical and Serial Console Access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Graphical and Serial Console Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-the-serial-console" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing the Serial Console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-the-graphical-console-vnc" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing the Graphical Console (VNC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-console-access" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging console access
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh-access" class="md-nav__link">
    <span class="md-ellipsis">
      SSH Access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#static-ssh-public-key-injection-via-cloud-init" class="md-nav__link">
    <span class="md-ellipsis">
      Static SSH public key injection via cloud-init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-ssh-public-key-injection-via-qemu-guest-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic SSH public key injection via qemu-guest-agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-a-vm-or-vmi-using-virtctl" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing a VM or VMI using virtctl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Accessing a VM or VMI using virtctl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-virtctl-as-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Using virtctl as proxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rbac-permissions-for-consolevncssh-access" class="md-nav__link">
    <span class="md-ellipsis">
      RBAC permissions for Console/VNC/SSH access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RBAC permissions for Console/VNC/SSH access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-default-rbac-cluster-roles" class="md-nav__link">
    <span class="md-ellipsis">
      Using default RBAC cluster roles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-custom-rbac-cluster-role" class="md-nav__link">
    <span class="md-ellipsis">
      Using custom RBAC cluster role
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../boot_from_external_source/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Booting From External Source
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../startup_scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Startup Scripts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../windows_virtio_drivers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows virtio drivers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../legacy_windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running legacy Windows versions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_11" >
        
          
          <label class="md-nav__link" for="__nav_5_11" id="__nav_5_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Monitoring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_11">
            <span class="md-nav__icon md-icon"></span>
            Monitoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../component_monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Component monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guest_agent_information/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guest Agent information
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guest_operating_system_information/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guest Operating System Information
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../liveness_and_readiness_probes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Liveness and Readiness Probes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_12" >
        
          
          <label class="md-nav__link" for="__nav_5_12" id="__nav_5_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Workloads
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_12">
            <span class="md-nav__icon md-icon"></span>
            Workloads
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../instancetypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instance types and preferences
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deploy_common_instancetypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploy common-instancetypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hook-sidecar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hook Sidecar Container
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../presets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Presets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VirtualMachinePool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../replicaset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VirtualMachineInstanceReplicaSet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../virtual_machine_instances/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Machines Instances
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vm_rollout_strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VM Rollout Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Compute
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Compute
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/client_passthrough/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Client Passthrough
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/cpu_hotplug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CPU Hotplug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/dedicated_cpu_resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dedicated CPU resources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/host-devices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Host Devices Assignment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/hugepages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hugepages support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/live_migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Live Migration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/mediated_devices_configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mediated devices and virtual GPUs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/memory_hotplug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory Hotplug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/node_assignment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node assignment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/node_overcommit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node overcommit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/numa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NUMA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/persistent_tpm_and_uefi_state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Persistent TPM and UEFI state
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/resources_requests_and_limits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resources requests and limits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/run_strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/virtual_hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual hardware
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/memory_dump/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual machine memory dump
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compute/vsock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSOCK
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network/dns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DNS records
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network/hotplug_interfaces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hotplug Network Interfaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network/interfaces_and_networks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interfaces and Networks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network/istio_service_mesh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Istio service mesh
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network/network_binding_plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Binding Plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network/networkpolicy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NetworkPolicy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network/service_objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service objects
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Storage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/clone_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clone API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/containerized_data_importer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Containerized Data Importer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/disks_and_volumes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filesystems, Disks and Volumes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/export_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Export API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/guestfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage of libguestfs-tools and virtctl guestfs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/hotplug_volumes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hotplug Volumes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/snapshot_restore_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Snapshot Restore API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/volume_migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update volume strategy and volume migration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Virtualization Debugging
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Virtualization Debugging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/debug/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control libvirt logging for each component
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/privileged-node-debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Privileged debugging on the node
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/virsh-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execute virsh commands in virt-launcher pod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/launch-qemu-strace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launch QEMU with strace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/launch-qemu-gdb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Launch QEMU with gdb and connect locally with gdb client
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#graphical-and-serial-console-access" class="md-nav__link">
    <span class="md-ellipsis">
      Graphical and Serial Console Access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Graphical and Serial Console Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-the-serial-console" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing the Serial Console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-the-graphical-console-vnc" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing the Graphical Console (VNC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-console-access" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging console access
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh-access" class="md-nav__link">
    <span class="md-ellipsis">
      SSH Access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#static-ssh-public-key-injection-via-cloud-init" class="md-nav__link">
    <span class="md-ellipsis">
      Static SSH public key injection via cloud-init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-ssh-public-key-injection-via-qemu-guest-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic SSH public key injection via qemu-guest-agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-a-vm-or-vmi-using-virtctl" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing a VM or VMI using virtctl
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Accessing a VM or VMI using virtctl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-virtctl-as-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      Using virtctl as proxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rbac-permissions-for-consolevncssh-access" class="md-nav__link">
    <span class="md-ellipsis">
      RBAC permissions for Console/VNC/SSH access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RBAC permissions for Console/VNC/SSH access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-default-rbac-cluster-roles" class="md-nav__link">
    <span class="md-ellipsis">
      Using default RBAC cluster roles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-custom-rbac-cluster-role" class="md-nav__link">
    <span class="md-ellipsis">
      Using custom RBAC cluster role
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/kubevirt/user-guide/edit/main/docs/user_workloads/accessing_virtual_machines.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/kubevirt/user-guide/raw/main/docs/user_workloads/accessing_virtual_machines.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="accessing-virtual-machines">Accessing Virtual Machines<a class="headerlink" href="#accessing-virtual-machines" title="Permanent link">&para;</a></h1>
<p>There are various methods to access <code>VirtualMachines</code>, as illustrated below.</p>
<p>To clarify: Consider a <code>VirtualMachineInstance</code> as a running <code>VirtualMachine</code>.</p>
<h2 id="graphical-and-serial-console-access">Graphical and Serial Console Access<a class="headerlink" href="#graphical-and-serial-console-access" title="Permanent link">&para;</a></h2>
<p>Once a virtual machine is started you are able to connect to the consoles it
exposes. Usually there are two types of consoles:</p>
<ul>
<li>Serial Console</li>
<li>Graphical Console (VNC)</li>
</ul>
<blockquote>
<p>Note: You need to have <code>virtctl</code>
<a href="../virtctl_client_tool/">installed</a> to gain
access to the VirtualMachineInstance.</p>
</blockquote>
<h3 id="accessing-the-serial-console">Accessing the Serial Console<a class="headerlink" href="#accessing-the-serial-console" title="Permanent link">&para;</a></h3>
<p>The serial console of a virtual machine can be accessed by using the <code>console</code>
command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>virtctl<span class="w"> </span>console<span class="w"> </span>testvm
</code></pre></div>
<h3 id="accessing-the-graphical-console-vnc">Accessing the Graphical Console (VNC)<a class="headerlink" href="#accessing-the-graphical-console-vnc" title="Permanent link">&para;</a></h3>
<p>To access the graphical console of a virtual machine the VNC protocol is
typically used. This requires <code>remote-viewer</code> to be installed. Once the
tool is installed, you can access the graphical console using:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>virtctl<span class="w"> </span>vnc<span class="w"> </span>testvm
</code></pre></div>
<p>If you only want to open a vnc-proxy without executing the <code>remote-viewer</code>
command, it can be accomplished with:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>virtctl<span class="w"> </span>vnc<span class="w"> </span>--proxy-only<span class="w"> </span>testvm
</code></pre></div>
<p>This would print the port number on your machine where you can manually connect
using any VNC viewer.</p>
<h3 id="debugging-console-access">Debugging console access<a class="headerlink" href="#debugging-console-access" title="Permanent link">&para;</a></h3>
<p>If the connection fails, you can use the <code>-v</code> flag to get more verbose
output from both <code>virtctl</code> and the <code>remote-viewer</code> tool to troubleshoot the
problem.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>virtctl<span class="w"> </span>vnc<span class="w"> </span>testvm<span class="w"> </span>-v<span class="w"> </span><span class="m">4</span>
</code></pre></div>
<blockquote>
<p><strong>Note:</strong> If you are using virtctl via SSH on a remote machine, you need to
forward the X session to your machine. Look up the -X and -Y flags of <code>ssh</code> if
you are not familiar with that. As an alternative you can proxy the API server
port with SSH to your machine (either direct or in combination
with <code>kubectl proxy</code>).</p>
</blockquote>
<h2 id="ssh-access">SSH Access<a class="headerlink" href="#ssh-access" title="Permanent link">&para;</a></h2>
<p>A common operational pattern used when managing virtual machines is to inject
SSH public keys into the virtual machines at boot. This allows automation tools
(like Ansible) to provision the virtual machine. It also gives operators a way
of gaining secure and passwordless access to a virtual machine.</p>
<p>KubeVirt provides multiple ways to inject SSH public keys into a virtual
machine.</p>
<p>In general, these methods fall into two categories:
 - <a href="./#static-ssh-key-injection-via-cloud-init">Static key injection</a>,
which places keys on the virtual machine the first time it is booted.
 - <a href="./#dynamic-ssh-key-injection-via-qemu-user-agent">Dynamic key injection</a>,
which allows keys to be dynamically updated both at boot and during runtime.</p>
<p>Once a SSH public key is injected into the virtual machine, it can be
accessed via <code>virtctl</code>.</p>
<h3 id="static-ssh-public-key-injection-via-cloud-init">Static SSH public key injection via cloud-init<a class="headerlink" href="#static-ssh-public-key-injection-via-cloud-init" title="Permanent link">&para;</a></h3>
<p>Users creating virtual machines can provide startup scripts to their virtual
machines, allowing multiple customization operations.</p>
<p>One option for injecting public SSH keys into a VM is via
<a href="../startup_scripts/#cloud-init">cloud-init startup script</a>.
However, there are more flexible options available.</p>
<p>The virtual machine's access credential API allows statically injecting SSH
public keys at startup time independently of the cloud-init user data by
placing the SSH public key into a Kubernetes <code>Secret</code>. This allows keeping the
application data in the cloud-init user data separate from the credentials
used to access the virtual machine.</p>
<p>A Kubernetes <code>Secret</code> can be created from an SSH public key like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Place SSH public key into a Secret</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>my-pub-key<span class="w"> </span>--from-file<span class="o">=</span><span class="nv">key1</span><span class="o">=</span>id_rsa.pub
</code></pre></div>
<p>The <code>Secret</code> containing the public key is then assigned to a virtual machine
using the access credentials API with the <code>noCloud</code> propagation method.</p>
<p>KubeVirt injects the SSH public key into the virtual machine by using the
generated cloud-init metadata instead of the user data. This separates
the application user data and user credentials.</p>
<blockquote>
<p>Note: The cloud-init <code>userData</code> is not touched.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Create a VM referencing the Secret using propagation method noCloud</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="s">apiVersion: kubevirt.io/v1</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="s">kind: VirtualMachine</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="s">metadata:</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="s">  name: testvm</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="s">spec:</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="s">  runStrategy: Always</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="s">  template:</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="s">    spec:</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="s">      domain:</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="s">        devices:</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="s">          disks:</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="s">          - disk:</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="s">              bus: virtio</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="s">            name: containerdisk</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="s">          - disk:</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="s">              bus: virtio</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="s">            name: cloudinitdisk</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="s">          rng: {}</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="s">        resources:</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="s">          requests:</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="s">            memory: 1024M</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="s">      terminationGracePeriodSeconds: 0</span>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="s">      accessCredentials:</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="s">      - sshPublicKey:</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="s">          source:</span>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="s">            secret:</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="s">              secretName: my-pub-key</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="s">          propagationMethod:</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="s">            noCloud: {}</span>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a><span class="s">      volumes:</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="s">      - containerDisk:</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="s">          image: quay.io/containerdisks/fedora:latest</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="s">        name: containerdisk</span>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a><span class="s">      - cloudInitNoCloud:</span>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a><span class="s">          userData: |-</span>
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a><span class="s">            #cloud-config</span>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a><span class="s">            password: fedora</span>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="s">            chpasswd: { expire: False }</span>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a><span class="s">        name: cloudinitdisk</span>
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a><span class="s">EOF</span>
</code></pre></div>
<h3 id="dynamic-ssh-public-key-injection-via-qemu-guest-agent">Dynamic SSH public key injection via qemu-guest-agent<a class="headerlink" href="#dynamic-ssh-public-key-injection-via-qemu-guest-agent" title="Permanent link">&para;</a></h3>
<p>KubeVirt allows the dynamic injection of SSH public keys into a VirtualMachine with the access credentials API.</p>
<p>Utilizing the <code>qemuGuestAgent</code> propagation method, configured Secrets are attached to a VirtualMachine when the VM is started. 
This allows for dynamic injection of SSH public keys at runtime by updating the attached Secrets.</p>
<p>Please note that new Secrets cannot be attached to a running VM: You must restart the VM to attach the new Secret.</p>
<blockquote>
<p>Note: This requires the qemu-guest-agent to be installed within the guest.</p>
<p>Note: When using qemuGuestAgent propagation,
the <code>/home/$USER/.ssh/authorized_keys</code> file will be owned by the guest agent.
Changes to the file not made by the guest agent will be lost.</p>
<p>Note: More information about the motivation behind the access credentials API
can be found in the
<a href="https://github.com/kubevirt/kubevirt/pull/4195">pull request description</a>
that introduced the API.</p>
</blockquote>
<p>In the example below the <code>Secret</code> containing the SSH public key is
attached to the virtual machine via the access credentials API with the
<code>qemuGuestAgent</code> propagation method. This allows updating the contents of
the <code>Secret</code> at any time, which will result in the changes getting applied
to the running virtual machine immediately. The <code>Secret</code> may also contain
multiple SSH public keys.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Place SSH public key into a secret</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>my-pub-key<span class="w"> </span>--from-file<span class="o">=</span><span class="nv">key1</span><span class="o">=</span>id_rsa.pub
</code></pre></div>
<p>Now reference this secret in the <code>VirtualMachine</code> spec with the access
credentials API using
<code>qemuGuestAgent</code> propagation.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Create a VM referencing the Secret using propagation method qemuGuestAgent</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="s">apiVersion: kubevirt.io/v1</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="s">kind: VirtualMachine</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="s">metadata:</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="s">  name: testvm</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="s">spec:</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="s">  runStrategy: Always</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="s">  template:</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="s">    spec:</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="s">      domain:</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="s">        devices:</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="s">          disks:</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="s">          - disk:</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="s">              bus: virtio</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="s">            name: containerdisk</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="s">          - disk:</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="s">              bus: virtio</span>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="s">            name: cloudinitdisk</span>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="s">          rng: {}</span>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="s">        resources:</span>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="s">          requests:</span>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="s">            memory: 1024M</span>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="s">      terminationGracePeriodSeconds: 0</span>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="s">      accessCredentials:</span>
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="s">      - sshPublicKey:</span>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="s">          source:</span>
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="s">            secret:</span>
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="s">              secretName: my-pub-key</span>
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="s">          propagationMethod:</span>
<a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="s">            qemuGuestAgent:</span>
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="s">              users:</span>
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="s">              - fedora</span>
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="s">      volumes:</span>
<a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="s">      - containerDisk:</span>
<a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a><span class="s">          image: quay.io/containerdisks/fedora:latest</span>
<a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="s">        name: containerdisk</span>
<a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="s">      - cloudInitNoCloud:</span>
<a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a><span class="s">          userData: |-</span>
<a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a><span class="s">            #cloud-config</span>
<a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a><span class="s">            password: fedora</span>
<a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a><span class="s">            chpasswd: { expire: False }</span>
<a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a><span class="s">            # Disable SELinux for now, so qemu-guest-agent can write the authorized_keys file</span>
<a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a><span class="s">            # The selinux-policy is too restrictive currently, see open bugs:</span>
<a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a><span class="s">            #   - https://bugzilla.redhat.com/show_bug.cgi?id=1917024</span>
<a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a><span class="s">            #   - https://bugzilla.redhat.com/show_bug.cgi?id=2028762</span>
<a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a><span class="s">            #   - https://bugzilla.redhat.com/show_bug.cgi?id=2057310</span>
<a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a><span class="s">            bootcmd:</span>
<a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a><span class="s">              - setenforce 0</span>
<a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a><span class="s">        name: cloudinitdisk</span>
<a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a><span class="s">EOF</span>
</code></pre></div>
<h3 id="accessing-a-vm-or-vmi-using-virtctl">Accessing a VM or VMI using virtctl<a class="headerlink" href="#accessing-a-vm-or-vmi-using-virtctl" title="Permanent link">&para;</a></h3>
<p>The user can create a websocket backed network tunnel to a port inside a VMI
by using the <code>virtualmachineinstances/portforward</code> subresource of a
<code>VirtualMachineInstance</code> or the <code>virtualmachines/portfoward</code> subresource of a
<code>VirtualMachine</code>.</p>
<p>One use case for these subresources is to forward SSH traffic into
a <code>VirtualMachineInstance</code> either from the CLI or a web-UI. The <code>VirtualMachine</code>
subresource will automatically look up the corresponding <code>VirtualMachineInstance</code>.</p>
<p>To connect to a <code>VirtualMachineInstance</code> from your local machine, <code>virtctl</code>
wraps the local SSH client with the <code>ssh</code> command and transparently uses port
forwarding as described above. Refer to the command's help for more details.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>virtctl<span class="w"> </span>ssh
</code></pre></div>
<p>To transfer files from or to a <code>VirtualMachineInstance</code> <code>virtctl</code> also
provides an SCP client with the <code>scp</code> command. Its usage is similar to the <code>ssh</code> command.
Refer to the command's help for more details.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>virtctl<span class="w"> </span>scp
</code></pre></div>
<h4 id="using-virtctl-as-proxy">Using virtctl as proxy<a class="headerlink" href="#using-virtctl-as-proxy" title="Permanent link">&para;</a></h4>
<p>The preferred way of connecting to VMs and VMIs is to use <code>virtctl</code> to wrap
local OpenSSH clients. If you prefer to use your local OpenSSH client directly
instead, there is also a way of doing that in combination with <code>virtctl</code>.</p>
<blockquote>
<p>Note: Most of this applies to the <code>virtctl scp</code> command too.</p>
</blockquote>
<ol>
<li>By default <code>virtctl</code> wraps the local OpenSSH client transparently
   to the user. The executed SSH command can be viewed by increasing the verbosity (<code>-v 3</code>).</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>virtctl<span class="w"> </span>ssh<span class="w"> </span>--local-ssh<span class="w"> </span>-v<span class="w"> </span><span class="m">3</span><span class="w"> </span>vm/testvm/mynamespace
</code></pre></div>
<ol>
<li>The <code>virtctl port-forward</code> command provides an option to tunnel a single
   port to your local stdout/stdin. This allows the command to be used in
   combination with the OpenSSH client's <code>ProxyCommand</code> option.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ssh<span class="w"> </span>-o<span class="w"> </span><span class="s1">&#39;ProxyCommand=virtctl port-forward --stdio=true vm/testvm/mynamespace 22&#39;</span><span class="w"> </span>fedora@vm/testvm/mynamespace
</code></pre></div>
<p>To provide easier access to arbitrary virtual machines you can add the following
lines to your SSH <code>config</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Host vmi/*
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>   ProxyCommand virtctl port-forward --stdio=true %h %p
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>Host vm/*
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>   ProxyCommand virtctl port-forward --stdio=true %h %p
</code></pre></div>
<p>This allows you to simply call <code>ssh user@vm/testvm/mynamespace</code> and your
SSH <code>config</code> and <code>virtctl</code> will do the rest. Using this method, it becomes easy
to set up different identities for different namespaces inside your SSH
<code>config</code>.</p>
<p>This feature can also be used with Ansible to automate configuration of virtual
machines running on KubeVirt. You can put the snippet above into its own
file (e.g. <code>~/.ssh/virtctl-proxy-config</code>) and add the following lines to
your <code>.ansible.cfg</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>[ssh_connection]
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>ssh_args = -F ~/.ssh/virtctl-proxy-config
</code></pre></div>
<p>Note that all port forwarding traffic will be sent over the Kubernetes
control plane. A high amount of connections and traffic can increase
pressure on the API server. If you regularly need a high amount of connections
and traffic consider using a dedicated Kubernetes <code>Service</code> instead.</p>
<h4 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>Create virtual machine and inject SSH public key as explained above</p>
</li>
<li>
<p>SSH into virtual machine</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>virtctl<span class="w"> </span>ssh<span class="w"> </span>-i<span class="w"> </span>id_rsa<span class="w"> </span>fedora@vm/testvm/mynamespace
</code></pre></div>
<p>or</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>ssh<span class="w"> </span>-o<span class="w"> </span><span class="s1">&#39;ProxyCommand=virtctl port-forward --stdio=true vm/testvm/mynamespace 22&#39;</span><span class="w"> </span>-i<span class="w"> </span>id_rsa<span class="w"> </span>fedora@vm/testvm/mynamespace
</code></pre></div>
<ol>
<li>SCP file to the virtual machine</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>virtctl<span class="w"> </span>scp<span class="w"> </span>-i<span class="w"> </span>id_rsa<span class="w"> </span>testfile<span class="w"> </span>fedora@vm/testvm/mynamespace:/tmp
</code></pre></div>
<p>or</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>scp<span class="w"> </span>-o<span class="w"> </span><span class="s1">&#39;ProxyCommand=virtctl port-forward --stdio=true vmi/testvm/mynamespace 22&#39;</span><span class="w"> </span>-i<span class="w"> </span>id_rsa<span class="w"> </span>testfile<span class="w"> </span>fedora@vm.testvm.mynamespace:/tmp
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Local <code>scp</code> does not support slashes in hostnames. Therefore the example
uses dots to separate the type, name and namespace like <code>virtctl</code> does when
wrapping the local SCP client.</p>
</div>
<h4 id="rbac-permissions-for-consolevncssh-access">RBAC permissions for Console/VNC/SSH access<a class="headerlink" href="#rbac-permissions-for-consolevncssh-access" title="Permanent link">&para;</a></h4>
<h5 id="using-default-rbac-cluster-roles">Using default RBAC cluster roles<a class="headerlink" href="#using-default-rbac-cluster-roles" title="Permanent link">&para;</a></h5>
<p>Every KubeVirt installation starting with version v0.5.1 ships a set of default
RBAC cluster roles that can be used to grant users access to
VirtualMachineInstances.</p>
<p>The <code>kubevirt.io:admin</code> and <code>kubevirt.io:edit</code> cluster roles have console,
VNC and SSH respectively port-forwarding access permissions built into them. By
binding either of these roles to a user, they will have the ability to use
virtctl to access the console, VNC and SSH.</p>
<h5 id="using-custom-rbac-cluster-role">Using custom RBAC cluster role<a class="headerlink" href="#using-custom-rbac-cluster-role" title="Permanent link">&para;</a></h5>
<p>The default KubeVirt cluster roles grant access to more than just the
console, VNC and port-forwarding. The <code>ClusterRole</code> below demonstrates how
to craft a custom role, that only allows access to the console, VNC and
port-forwarding.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1beta1</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">allow-console-vnc-port-forward-access</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subresources.kubevirt.io</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">    </span><span class="nt">resources</span><span class="p">:</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">virtualmachineinstances/console</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">virtualmachineinstances/vnc</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">    </span><span class="nt">verbs</span><span class="p">:</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">apiGroups</span><span class="p">:</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subresources.kubevirt.io</span>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">    </span><span class="nt">resources</span><span class="p">:</span>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">virtualmachineinstances/portforward</span>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="w">    </span><span class="nt">verbs</span><span class="p">:</span>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">update</span>
</code></pre></div>
<p>When bound with a <code>ClusterRoleBinding</code> the <code>ClusterRole</code> above grants access
to virtual machines across all namespaces.</p>
<p>In order to reduce the scope to a single namespace, bind this <code>ClusterRole</code>
using a <code>RoleBinding</code> that targets a single namespace.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../virtctl_client_tool/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Download and Install the virtctl Command Line Interface">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Download and Install the virtctl Command Line Interface
              </div>
            </div>
          </a>
        
        
          
          <a href="../boot_from_external_source/" class="md-footer__link md-footer__link--next" aria-label="Next: Booting From External Source">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Booting From External Source
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "content.action.view", "content.action.edit"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>
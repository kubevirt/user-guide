
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for KubeVirt">
      
      
      
        <link rel="canonical" href="https://kubevirt.io/user-guide/operations/installation/">
      
      
        <link rel="prev" href="../../quickstarts/">
      
      
        <link rel="next" href="../updating_and_deletion/">
      
      
      <link rel="icon" href="../../assets/favicon32x32.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.20">
    
    
      
        <title>Installation - KubeVirt user guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="KubeVirt user guide" class="md-header__button md-logo" aria-label="KubeVirt user guide" data-md-component="logo">
      
  <img src="../../assets/KubeVirt_icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KubeVirt user guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Welcome

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../architecture/" class="md-tabs__link">
        
  
    
  
  Architecture

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../quickstarts/" class="md-tabs__link">
        
  
    
  
  Quickstarts

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Operations

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../virtual_machines/virtual_machine_instances/" class="md-tabs__link">
          
  
  Virtual Machines

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../release_notes/" class="md-tabs__link">
        
  
    
  
  Release Notes

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/" class="md-tabs__link">
        
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../debug_virt_stack/logging/" class="md-tabs__link">
          
  
  Virtualization Debugging

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="KubeVirt user guide" class="md-nav__button md-logo" aria-label="KubeVirt user guide" data-md-component="logo">
      
  <img src="../../assets/KubeVirt_icon.png" alt="logo">

    </a>
    KubeVirt user guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstarts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstarts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Operations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Operations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Installation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#container-runtime-support" class="md-nav__link">
    <span class="md-ellipsis">
      Container Runtime Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-with-apparmor" class="md-nav__link">
    <span class="md-ellipsis">
      Integration with AppArmor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-hardware-virtualization-support" class="md-nav__link">
    <span class="md-ellipsis">
      Validate Hardware Virtualization Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selinux-support" class="md-nav__link">
    <span class="md-ellipsis">
      SELinux support
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-kubevirt-on-kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      Installing KubeVirt on Kubernetes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-kubevirt-on-okd" class="md-nav__link">
    <span class="md-ellipsis">
      Installing KubeVirt on OKD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing KubeVirt on OKD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#web-user-interface-on-okd" class="md-nav__link">
    <span class="md-ellipsis">
      Web user interface on OKD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-service-catalog-as-an-apb" class="md-nav__link">
    <span class="md-ellipsis">
      From Service Catalog as an APB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-kubevirt-on-k3os" class="md-nav__link">
    <span class="md-ellipsis">
      Installing KubeVirt on k3OS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-daily-developer-builds" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the Daily Developer Builds
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the Daily Developer Builds">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arm64-developer-builds" class="md-nav__link">
    <span class="md-ellipsis">
      ARM64 developer builds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-from-source" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying from Source
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-network-plugins-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Installing network plugins (optional)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restricting-kubevirt-components-node-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Restricting KubeVirt components node placement
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../updating_and_deletion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Updating and deletion
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basic_use/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic use
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../customize_components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customize components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deploy_common_instancetypes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy common-instancetypes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api_validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../virtctl_client_tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Download and Install the virtctl Command Line Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../live_migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Live Migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hotplug_interfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hotplug Network Interfaces
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hotplug_volumes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hotplug Volumes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client_passthrough/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client Passthrough
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../snapshot_restore_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Snapshot Restore API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scheduler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KubeVirt Scheduler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hugepages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hugepages support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../component_monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Component monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../authorization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authorization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../annotations_and_labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotations and labels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../node_assignment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node assignment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../node_maintenance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node maintenance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../node_overcommit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node overcommit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unresponsive_nodes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unresponsive nodes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../containerized_data_importer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Containerized Data Importer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../activating_feature_gates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activating feature gates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../export_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Export API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../clone_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clone API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memory_dump/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual machine memory dump
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mediated_devices_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mediated devices and virtual GPUs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration_policies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration Policies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ksm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KSM Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gitops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing KubeVirt with GitOps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operations_on_Arm64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arm64 Operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../feature_gate_status_on_Arm64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Feature Gate Status on Arm64
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cpu_hotplug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CPU Hotplug
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memory_hotplug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory Hotplug
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vm_rollout_strategies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VM Rollout Strategies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hook-sidecar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hook Sidecar Container
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Virtual Machines
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Virtual Machines
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/virtual_machine_instances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Machines Instances
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/creating_vms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating VirtualMachines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/lifecycle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifecycle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/run_strategies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run Strategies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/instancetypes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instance types and preferences
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/presets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Presets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/virtual_hardware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual hardware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/dedicated_cpu_resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dedicated CPU resources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/numa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NUMA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/disks_and_volumes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filesystems, Disks and Volumes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/interfaces_and_networks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interfaces and Networks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/network_binding_plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Binding Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/istio_service_mesh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Istio service mesh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/networkpolicy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NetworkPolicy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/host-devices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Host Devices Assignment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/windows_virtio_drivers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows virtio drivers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/guest_operating_system_information/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guest Operating System Information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/guest_agent_information/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guest Agent information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/liveness_and_readiness_probes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Liveness and Readiness Probes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/accessing_virtual_machines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing Virtual Machines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/startup_scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Startup Scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/service_objects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/tekton_tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    KubeVirt Tekton
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/replicaset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VirtualMachineInstanceReplicaSet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VirtualMachinePool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/dns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DNS records
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/boot_from_external_source/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Booting From External Source
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/confidential_computing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Confidential computing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/vsock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VSOCK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/virtual_machines_on_Arm64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Machines on Arm64
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/device_status_on_Arm64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Device Status on Arm64
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/persistent_tpm_and_uefi_state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Persistent TPM and UEFI state
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/resources_requests_and_limits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resources requests and limits
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../virtual_machines/guestfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage of libguestfs-tools and virtctl guestfs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release_notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Virtualization Debugging
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Virtualization Debugging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Control libvirt logging for each component
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/privileged-node-debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Privileged debugging on the node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/virsh-commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Execute virsh commands in virt-launcher pod
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/launch-qemu-strace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Launch QEMU with strace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug_virt_stack/launch-qemu-gdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Launch QEMU with gdb and connect locally with gdb client
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#container-runtime-support" class="md-nav__link">
    <span class="md-ellipsis">
      Container Runtime Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-with-apparmor" class="md-nav__link">
    <span class="md-ellipsis">
      Integration with AppArmor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-hardware-virtualization-support" class="md-nav__link">
    <span class="md-ellipsis">
      Validate Hardware Virtualization Support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#selinux-support" class="md-nav__link">
    <span class="md-ellipsis">
      SELinux support
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-kubevirt-on-kubernetes" class="md-nav__link">
    <span class="md-ellipsis">
      Installing KubeVirt on Kubernetes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-kubevirt-on-okd" class="md-nav__link">
    <span class="md-ellipsis">
      Installing KubeVirt on OKD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing KubeVirt on OKD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#web-user-interface-on-okd" class="md-nav__link">
    <span class="md-ellipsis">
      Web user interface on OKD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-service-catalog-as-an-apb" class="md-nav__link">
    <span class="md-ellipsis">
      From Service Catalog as an APB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-kubevirt-on-k3os" class="md-nav__link">
    <span class="md-ellipsis">
      Installing KubeVirt on k3OS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-daily-developer-builds" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the Daily Developer Builds
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the Daily Developer Builds">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arm64-developer-builds" class="md-nav__link">
    <span class="md-ellipsis">
      ARM64 developer builds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-from-source" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying from Source
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-network-plugins-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Installing network plugins (optional)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restricting-kubevirt-components-node-placement" class="md-nav__link">
    <span class="md-ellipsis">
      Restricting KubeVirt components node placement
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/kubevirt/user-guide/edit/main/docs/operations/installation.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/kubevirt/user-guide/raw/main/docs/operations/installation.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h1>
<p>KubeVirt is a virtualization add-on to Kubernetes and this guide assumes
that a Kubernetes cluster is already installed.</p>
<p>If installed on OKD, the web console is extended for management of
virtual machines.</p>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<p>A few requirements need to be met before you can begin:</p>
<ul>
<li><a href="https://kubernetes.io">Kubernetes</a> cluster or derivative
    (such as <a href="https://github.com/openshift/origin">OpenShift</a>)
    based on a one of the latest three Kubernetes releases that are
    out at the time the KubeVirt release is made.</li>
<li>Kubernetes apiserver must have <code>--allow-privileged=true</code> in order to run KubeVirt's privileged DaemonSet.</li>
<li><code>kubectl</code> client utility</li>
</ul>
<h3 id="container-runtime-support">Container Runtime Support<a class="headerlink" href="#container-runtime-support" title="Permanent link">&para;</a></h3>
<p>KubeVirt is currently supported on the following container runtimes:</p>
<ul>
<li>containerd</li>
<li>crio (with runv)</li>
</ul>
<p>Other container runtimes, which do not use virtualization features,
should work too. However, the mentioned ones are the main target.</p>
<h3 id="integration-with-apparmor">Integration with AppArmor<a class="headerlink" href="#integration-with-apparmor" title="Permanent link">&para;</a></h3>
<p>In most of the scenarios, KubeVirt can run normally on systems with
AppArmor. However, there are several known use cases that may require
additional user interaction.</p>
<ul>
<li>
<p>On a system with AppArmor enabled, the locally installed profiles
    may block the execution of the KubeVirt privileged containers. That
    usually results in initialization failure of the <code>virt-handler</code>
    pod:</p>
<div class="highlight"><pre><span></span><code>$ kubectl get pods -n kubevirt
NAME                               READY   STATUS       RESTARTS         AGE
virt-api-77df5c4f87-7mqv4          1/1     Running      1 (17m ago)      27m
virt-api-77df5c4f87-wcq44          1/1     Running      1 (17m ago)      27m
virt-controller-749d8d99d4-56gb7   1/1     Running      1 (17m ago)      27m
virt-controller-749d8d99d4-78j6x   1/1     Running      1 (17m ago)      27m
virt-handler-4w99d                 0/1     Init:Error   14 (5m18s ago)   27m
virt-operator-564f568975-g9wh4     1/1     Running      1 (17m ago)      31m
virt-operator-564f568975-wnpz8     1/1     Running      1 (17m ago)      31m

$ kubectl logs -n kubevirt virt-handler-4w99d virt-launcher
error: failed to get emulator capabilities

error: internal error: Failed to start QEMU binary /usr/libexec/qemu-kvm for probing: libvirt: error : cannot execute binary /usr/libexec/qemu-kvm: Permission denied

$ journalctl -b | grep DEN
...
May 18 16:44:20 debian audit[6316]: AVC apparmor=&quot;DENIED&quot; operation=&quot;exec&quot; profile=&quot;libvirtd&quot; name=&quot;/usr/libexec/qemu-kvm&quot; pid=6316 comm=&quot;rpc-worker&quot; requested_mask=&quot;x&quot; denied_mask=&quot;x&quot; fsuid=107 ouid=0
May 18 16:44:20 debian kernel: audit: type=1400 audit(1652888660.539:39): apparmor=&quot;DENIED&quot; operation=&quot;exec&quot; profile=&quot;libvirtd&quot; name=&quot;/usr/libexec/qemu-kvm&quot; pid=6316 comm=&quot;rpc-worker&quot; requested_mask=&quot;x&quot; denied_mask=&quot;x&quot; fsuid=107 ouid=0
...
</code></pre></div>
<p>Here, the host AppArmor profile for <code>libvirtd</code> does not allow the
execution of the <code>/usr/libexec/qemu-kvm</code> binary. In the future
this will hopefully work out of the box
(<a href="https://github.com/kubevirt/kubevirt/issues/8744">tracking issue</a>),
but until then there are a couple of possible workarounds.</p>
<p>The first (and simplest) one is to remove the libvirt package
from the host: assuming the host is a dedicated Kubernetes node,
you likely won't need it anyway.</p>
<p>If you actually need libvirt to be present on the host, then you
can add the following rule to the AppArmor profile for libvirtd
(usually <code>/etc/apparmor.d/usr.sbin.libvirtd</code>):</p>
<div class="highlight"><pre><span></span><code># vim /etc/apparmor.d/usr.sbin.libvirtd
...
/usr/libexec/qemu-kvm PUx,
...
# apparmor_parser -r /etc/apparmor.d/usr.sbin.libvirtd # or systemctl reload apparmor.service
</code></pre></div>
</li>
<li>
<p>The default AppArmor profile used by the container runtimes usually
    denies <code>mount</code> call for the workloads. That may prevent from
    running VMs with <a href="../../virtual_machines/disks_and_volumes/#virtio-fs">VirtIO-FS</a>.
    This is a <a href="https://github.com/kubevirt/kubevirt/issues/4290">known issue</a>.
    The current workaround is to run such a VM as <code>unconfined</code> by adding the
    following annotation to the VM or VMI object:</p>
<div class="highlight"><pre><span></span><code>annotations:
  container.apparmor.security.beta.kubernetes.io/compute: unconfined
</code></pre></div>
</li>
</ul>
<h3 id="validate-hardware-virtualization-support">Validate Hardware Virtualization Support<a class="headerlink" href="#validate-hardware-virtualization-support" title="Permanent link">&para;</a></h3>
<p>Hardware with virtualization support is recommended. You can use
virt-host-validate to ensure that your hosts are capable of running
virtualization workloads:</p>
<div class="highlight"><pre><span></span><code>$ virt-host-validate qemu
  QEMU: Checking for hardware virtualization                                 : PASS
  QEMU: Checking if device /dev/kvm exists                                   : PASS
  QEMU: Checking if device /dev/kvm is accessible                            : PASS
  QEMU: Checking if device /dev/vhost-net exists                             : PASS
  QEMU: Checking if device /dev/net/tun exists                               : PASS
...
</code></pre></div>
<h3 id="selinux-support">SELinux support<a class="headerlink" href="#selinux-support" title="Permanent link">&para;</a></h3>
<p>SELinux-enabled nodes need <a href="https://github.com/containers/container-selinux">Container-selinux</a> installed. The minimum version is documented inside the kubevirt/kubevirt repository, in docs/getting-started.md, under "SELinux support".</p>
<p>For (older) release branches that don't specify a container-selinux version, version 2.170.0 or newer is recommended.</p>
<h2 id="installing-kubevirt-on-kubernetes">Installing KubeVirt on Kubernetes<a class="headerlink" href="#installing-kubevirt-on-kubernetes" title="Permanent link">&para;</a></h2>
<p>KubeVirt can be installed using the KubeVirt operator, which manages the
lifecycle of all the KubeVirt core components. Below is an example of
how to install KubeVirt's latest official release. It supports to deploy KubeVirt
on both x86_64 and Arm64 platforms.</p>
<div class="highlight"><pre><span></span><code># Point at latest release
$ export RELEASE=$(curl https://storage.googleapis.com/kubevirt-prow/release/kubevirt/kubevirt/stable.txt)
# Deploy the KubeVirt operator
$ kubectl apply -f https://github.com/kubevirt/kubevirt/releases/download/${RELEASE}/kubevirt-operator.yaml
# Create the KubeVirt CR (instance deployment request) which triggers the actual installation
$ kubectl apply -f https://github.com/kubevirt/kubevirt/releases/download/${RELEASE}/kubevirt-cr.yaml
# wait until all KubeVirt components are up
$ kubectl -n kubevirt wait kv kubevirt --for condition=Available
</code></pre></div>
<p>If hardware virtualization is not available, then a
<a href="https://github.com/kubevirt/kubevirt/blob/main/docs/software-emulation.md">software emulation fallback</a>
can be enabled using by setting in the KubeVirt CR <code>spec.configuration.developerConfiguration.useEmulation</code> to <code>true</code> as follows:</p>
<div class="highlight"><pre><span></span><code>$ kubectl edit -n kubevirt kubevirt kubevirt
</code></pre></div>
<p>Add the following to the <code>kubevirt.yaml</code> file</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">configuration</span><span class="p p-Indicator">:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">developerConfiguration</span><span class="p">:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">        </span><span class="nt">useEmulation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<blockquote>
<p>Note: Prior to release v0.20.0 the condition for the <code>kubectl wait</code>
command was named "Ready" instead of "Available"</p>
<p>Note: Prior to KubeVirt 0.34.2 a ConfigMap called <code>kubevirt-config</code> in the
install-namespace was used to configure KubeVirt. Since 0.34.2 this method is
deprecated. The configmap still has precedence over <code>configuration</code> on the
CR exists, but it will not receive future updates and you should migrate any
custom configurations to <code>spec.configuration</code> on the KubeVirt CR.</p>
</blockquote>
<p>All new components will be deployed under the <code>kubevirt</code> namespace:</p>
<div class="highlight"><pre><span></span><code>kubectl get pods -n kubevirt
NAME                                           READY     STATUS        RESTARTS   AGE
virt-api-6d4fc3cf8a-b2ere                      1/1       Running       0          1m
virt-controller-5d9fc8cf8b-n5trt               1/1       Running       0          1m
virt-handler-vwdjx                             1/1       Running       0          1m
...
</code></pre></div>
<h2 id="installing-kubevirt-on-okd">Installing KubeVirt on OKD<a class="headerlink" href="#installing-kubevirt-on-okd" title="Permanent link">&para;</a></h2>
<p>The following
<a href="https://docs.openshift.com/container-platform/4.10/authentication/managing-security-context-constraints.html">SCC</a>
needs to be added prior KubeVirt deployment:</p>
<div class="highlight"><pre><span></span><code>$ oc adm policy add-scc-to-user privileged -n kubevirt -z kubevirt-operator
</code></pre></div>
<p>Once privileges are granted, the KubeVirt can be deployed as described above.</p>
<h3 id="web-user-interface-on-okd">Web user interface on OKD<a class="headerlink" href="#web-user-interface-on-okd" title="Permanent link">&para;</a></h3>
<p>No additional steps are required to extend OKD's web console for KubeVirt.</p>
<p>The virtualization extension is automatically enabled when KubeVirt deployment is detected.</p>
<h3 id="from-service-catalog-as-an-apb">From Service Catalog as an APB<a class="headerlink" href="#from-service-catalog-as-an-apb" title="Permanent link">&para;</a></h3>
<p>You can find KubeVirt in the OKD Service Catalog and install it from
there. In order to do that please follow the documentation in the
<a href="https://github.com/ansibleplaybookbundle/kubevirt-apb">KubeVirt APB
repository</a>.</p>
<h2 id="installing-kubevirt-on-k3os">Installing KubeVirt on k3OS<a class="headerlink" href="#installing-kubevirt-on-k3os" title="Permanent link">&para;</a></h2>
<p>The following
<a href="https://github.com/rancher/k3os#configuration">configuration</a>
needs to be added to all nodes prior KubeVirt deployment:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">k3os</span><span class="p">:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="nt">modules</span><span class="p">:</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kvm</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vhost_net</span>
</code></pre></div>
<p>Once nodes are restarted with this configuration, the KubeVirt can be deployed as described above.</p>
<h2 id="installing-the-daily-developer-builds">Installing the Daily Developer Builds<a class="headerlink" href="#installing-the-daily-developer-builds" title="Permanent link">&para;</a></h2>
<!-- markdown-link-check-disable -->
<p>KubeVirt releases daily a developer build from the current main branch. One can see
when the last release happened by looking at our
<a href="https://prow.ci.kubevirt.io/?job=periodic-kubevirt-push-nightly-build-*">nightly-build-jobs</a>.</p>
<!-- markdown-link-check-enable -->

<p>To install the latest developer build, run the following commands:</p>
<div class="highlight"><pre><span></span><code>$ LATEST=$(curl -L https://storage.googleapis.com/kubevirt-prow/devel/nightly/release/kubevirt/kubevirt/latest)
$ kubectl apply -f https://storage.googleapis.com/kubevirt-prow/devel/nightly/release/kubevirt/kubevirt/${LATEST}/kubevirt-operator.yaml
$ kubectl apply -f https://storage.googleapis.com/kubevirt-prow/devel/nightly/release/kubevirt/kubevirt/${LATEST}/kubevirt-cr.yaml
</code></pre></div>
<p>To find out which commit this build is based on, run:</p>
<div class="highlight"><pre><span></span><code>$ LATEST=$(curl -L https://storage.googleapis.com/kubevirt-prow/devel/nightly/release/kubevirt/kubevirt/latest)
$ curl https://storage.googleapis.com/kubevirt-prow/devel/nightly/release/kubevirt/kubevirt/${LATEST}/commit
d358cf085b5a86cc4fa516215f8b757a4e61def2
</code></pre></div>
<h3 id="arm64-developer-builds">ARM64 developer builds<a class="headerlink" href="#arm64-developer-builds" title="Permanent link">&para;</a></h3>
<p>ARM64 developer builds can be installed like this:</p>
<div class="highlight"><pre><span></span><code>$ LATEST=$(curl -L https://storage.googleapis.com/kubevirt-prow/devel/nightly/release/kubevirt/kubevirt/latest-arm64)
$ kubectl apply -f https://storage.googleapis.com/kubevirt-prow/devel/nightly/release/kubevirt/kubevirt/${LATEST}/kubevirt-operator-arm64.yaml
$ kubectl apply -f https://storage.googleapis.com/kubevirt-prow/devel/nightly/release/kubevirt/kubevirt/${LATEST}/kubevirt-cr-arm64.yaml
</code></pre></div>
<h2 id="deploying-from-source">Deploying from Source<a class="headerlink" href="#deploying-from-source" title="Permanent link">&para;</a></h2>
<p>See the <a href="https://github.com/kubevirt/kubevirt/blob/main/docs/getting-started.md">Developer Getting Started
Guide</a>
to understand how to build and deploy KubeVirt from source.</p>
<h2 id="installing-network-plugins-optional">Installing network plugins (optional)<a class="headerlink" href="#installing-network-plugins-optional" title="Permanent link">&para;</a></h2>
<p>KubeVirt alone does not bring any additional network plugins, it just
allows user to utilize them. If you want to attach your VMs to multiple
networks (Multus CNI) or have full control over L2 (OVS CNI), you need
to deploy respective network plugins. For more information, refer to
<a href="https://github.com/kubevirt/ovs-cni/blob/main/docs/deployment-on-arbitrary-cluster.md">OVS CNI installation
guide</a>.</p>
<blockquote>
<p>Note: KubeVirt Ansible <a href="https://github.com/kubevirt/kubevirt-ansible/tree/master/playbooks#network">network
playbook</a>
installs these plugins by default.</p>
</blockquote>
<h2 id="restricting-kubevirt-components-node-placement">Restricting KubeVirt components node placement<a class="headerlink" href="#restricting-kubevirt-components-node-placement" title="Permanent link">&para;</a></h2>
<p>You can restrict the placement of the KubeVirt components across your 
cluster nodes by editing the KubeVirt CR:</p>
<ul>
<li>The placement of the KubeVirt control plane components (virt-controller, virt-api)
  is governed by the <code>.spec.infra.nodePlacement</code> field in the KubeVirt CR.</li>
<li>The placement of the virt-handler DaemonSet pods (and consequently, the placement of the 
  VM workloads scheduled to the cluster) is governed by the <code>.spec.workloads.nodePlacement</code>
  field in the KubeVirt CR.</li>
</ul>
<p>For each of these <code>.nodePlacement</code> objects, the <code>.affinity</code>, <code>.nodeSelector</code> and <code>.tolerations</code> sub-fields can be configured.
See the description in the <a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_componentconfig">API reference</a>
for further information about using these fields.</p>
<p>For example, to restrict the virt-controller and virt-api pods to only run on the control-plane nodes:</p>
<div class="highlight"><pre><span></span><code>kubectl patch -n kubevirt kubevirt kubevirt --type merge --patch &#39;{&quot;spec&quot;: {&quot;infra&quot;: {&quot;nodePlacement&quot;: {&quot;nodeSelector&quot;: {&quot;node-role.kubernetes.io/control-plane&quot;: &quot;&quot;}}}}}&#39;
</code></pre></div>
<p>To restrict the virt-handler pods to only run on nodes with the "region=primary" label:</p>
<div class="highlight"><pre><span></span><code>kubectl patch -n kubevirt kubevirt kubevirt --type merge --patch &#39;{&quot;spec&quot;: {&quot;workloads&quot;: {&quot;nodePlacement&quot;: {&quot;nodeSelector&quot;: {&quot;region&quot;: &quot;primary&quot;}}}}}&#39;
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../quickstarts/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Quickstarts">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Quickstarts
              </div>
            </div>
          </a>
        
        
          
          <a href="../updating_and_deletion/" class="md-footer__link md-footer__link--next" aria-label="Next: Updating and deletion">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Updating and deletion
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "content.action.view", "content.action.edit"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.dd8806f2.min.js"></script>
      
    
  </body>
</html>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>KubeVirt Latest | Architecture | Virtual Machines</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

    <link href="../../latest/_stylesheets/asciibinder.css" rel="stylesheet" />

   <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
   <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
   <!--[if lt IE 9]>
     <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
     <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
   <![endif]-->

  <link href="../../latest/_images/favicon32x32.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="../../latest/_images/favicon.ico"><![endif]-->
  <meta content="AsciiBinder" name="application-name">
</head>
<body>
  <div class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="https://kubevirt.io/"><img alt="Kubevirt" height="64px" src="../../latest/_images/KubeVirt_icon.png"></a>
      </div>
    </div>
  </div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../index.html">Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../welcome/index.html">KubeVirt Latest</a>
      </li>
      <li class="hidden-xs active">
        <a href="../architecture/virtual-machine.html">Architecture</a>
      </li>
      
      <li class="hidden-xs active">
        Virtual Machines
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>Welcome
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>Release Notes
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../release-notes/changelog.html">Changelog</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-down"></span>Architecture
      </a>
      <ul id="topicGroup2" class="collapse in list-unstyled">
            <li><a class=" active" href="../architecture/virtual-machine.html">Virtual Machines</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Installation & Administration
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../administration/intro.html">Installation</a></li>
            <li><a class="" href="../administration/api-validation.html">Webhooks</a></li>
            <li><a class="" href="../administration/authorization.html">Authorization</a></li>
            <li><a class="" href="../administration/monitoring.html">Monitoring</a></li>
            <li><a class="" href="../administration/annotations_and_labels.html">Annotations and Labels</a></li>
            <li><a class="" href="../administration/unresponsive-nodes.html">Unresponsive node handling</a></li>
            <li><a class="" href="../administration/node-eviction.html">Node eviciton</a></li>
            <li><a class="" href="../administration/image-upload.html">Image upload</a></li>
            <li><a class="" href="../administration/live-migration.html">Live Migration</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-right"></span>Creating Virtual Machines
      </a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../creating-virtual-machines/intro.html">Introduction</a></li>
            <li><a class="" href="../creating-virtual-machines/virtualized-hardware-configuration.html">Devices</a></li>
            <li><a class="" href="../creating-virtual-machines/disks-and-volumes.html">Disks and Volumes</a></li>
            <li><a class="" href="../creating-virtual-machines/interfaces-and-networks.html">Interfaces and Networks</a></li>
            <li><a class="" href="../creating-virtual-machines/dedicated-cpu.html">Guaranteed CPU usage</a></li>
            <li><a class="" href="../creating-virtual-machines/startup-scripts.html">cloud-init</a></li>
            <li><a class="" href="../creating-virtual-machines/guest-operating-system-information.html">Associating Guest Informations</a></li>
            <li><a class="" href="../creating-virtual-machines/virtio-win.html">virtio drivers for Microsoft Windows</a></li>
            <li><a class="" href="../creating-virtual-machines/presets.html">Presets</a></li>
            <li><a class="" href="../creating-virtual-machines/probes.html">Probes</a></li>
            <li><a class="" href="../creating-virtual-machines/run-strategies.html">Run Strategies</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Using Virtual Machines
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../using-virtual-machines/usage.html">Usage</a></li>
            <li><a class="" href="../using-virtual-machines/life-cycle.html">Starting and Stopping</a></li>
            <li><a class="" href="../using-virtual-machines/graphical-and-console-access.html">Console Access (Serial and Graphical)</a></li>
            <li><a class="" href="../using-virtual-machines/assigning-vms-to-nodes.html">Node placement</a></li>
            <li><a class="" href="../using-virtual-machines/dns.html">DNS Integration</a></li>
            <li><a class="" href="../using-virtual-machines/expose-service.html">Service Integration</a></li>
            <li><a class="" href="../using-virtual-machines/create-networkpolicy.html">Assigning Network Policies</a></li>
            <li><a class="" href="../using-virtual-machines/overcommit.html">Memory over-commit</a></li>
            <li><a class="" href="../using-virtual-machines/virtual-machine-replica-set.html">Virtual Machine Replica Set</a></li>
            <li><a class="" href="../using-virtual-machines/vmctl.html">vmctl</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-right"></span>Working with Templates
      </a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../templates/common-templates.html">Introduction</a></li>
            <li><a class="" href="../templates/using-templates.html">Using templates</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup7">
        <span id="tgSpan7" class="fa fa-angle-right"></span>Web Interface
      </a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../web-interface/web-interface.html">Web Interface</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>VirtualMachine</h2>
        </div>
        <div class="sect1">
<h2 id="virtualmachine"><a class="anchor" href="#virtualmachine"></a>VirtualMachine</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An <em>VirtualMachine</em> provides additional management capabilities to a
VirtualMachineInstance inside the cluster. That includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ABI stability</p>
</li>
<li>
<p>Start/stop/restart capabilities on the controller level</p>
</li>
<li>
<p>Offline configuration change with propagation on
VirtualMachineInstance recreation</p>
</li>
<li>
<p>Ensure that the VirtualMachineInstance is running if it should be
running</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It focuses on a 1:1 relationship between the controller instance and a
virtual machine instance. In many ways it is very similar to a
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/">StatefulSet</a>
with <code>spec.replica</code> set to <code>1</code>.</p>
</div>
<div class="sect2">
<h3 id="how-to-use-a-virtualmachine"><a class="anchor" href="#how-to-use-a-virtualmachine"></a>How to use a VirtualMachine</h3>
<div class="paragraph">
<p>A VirtualMachine will make sure that a VirtualMachineInstance object
with an identical name will be present in the cluster, if <code>spec.running</code>
is set to <code>true</code>. Further it will make sure that a
VirtualMachineInstance will be removed from the cluster if
<code>spec.running</code> is set to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>There exists a field <code>spec.runStrategy</code> which can also be used to control the
state of the associated VirtualMachineInstance object. To avoid confusing and
contradictory states, these fields are mutually exclusive. An extended
explanation of <code>spec.runStrategy</code> vs <code>spec.running</code> can be found in
<a href="../creating-virtual-machines/run-strategies.html">Run Strategies</a></p>
</div>
<div class="sect3">
<h4 id="starting-and-stopping"><a class="anchor" href="#starting-and-stopping"></a>Starting and stopping</h4>
<div class="paragraph">
<p>After creating a VirtualMachine it can be switched on or off like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># Start the virtual machine:
virtctl start myvm

# Stop the virtual machine:
virtctl stop myvm</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>kubectl</code> can be used too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># Start the virtual machine:
kubectl patch virtualmachine myvm --type merge -p \
    '{&quot;spec&quot;:{&quot;running&quot;:true}}'

# Stop the virtual machine:
kubectl patch virtualmachine myvm --type merge -p \
    '{&quot;spec&quot;:{&quot;running&quot;:false}}'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="controller-status"><a class="anchor" href="#controller-status"></a>Controller status</h4>
<div class="paragraph">
<p>Once a VirtualMachineInstance is created, its state will be tracked via
<code>status.created</code> and <code>status.ready</code>. If a VirtualMachineInstance exists
in the cluster, <code>status.created</code> will equal to <code>true</code>. If the
VirtualMachineInstance is also ready, <code>status.ready</code> will equal <code>true</code>
too.</p>
</div>
<div class="paragraph">
<p>If a VirtualMachineInstance reaches a final state but the <code>spec.running</code>
equals <code>true</code>, the VirtualMachine controller will set <code>status.ready</code> to
<code>false</code> and re-create the VirtualMachineInstance.</p>
</div>
</div>
<div class="sect3">
<h4 id="restarting"><a class="anchor" href="#restarting"></a>Restarting</h4>
<div class="paragraph">
<p>A VirtualMachineInstance restart can be triggered by deleting the
VirtualMachineInstance. This will also propagate configuration changes
from the template in the VirtualMachine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># Restart the virtual machine (you delete the instance!):
kubectl delete virtualmachineinstance myvm</code></pre>
</div>
</div>
<div class="paragraph">
<p>To restart a VirtualMachine named myvm using virtctl:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ virtctl restart myvm</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would perform a normal restart for the VirtualMachineInstance and would reschedule the VirtualMachineInstance on a new virt-launcher Pod</p>
</div>
<div class="paragraph">
<p>To force restart a VirtualMachine named myvm using virtctl:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ virtctl restart myvm --force --grace-period=0</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would try to perform a normal restart, and would also delete the virt-launcher Pod of the VirtualMachineInstance with setting GracePeriodSeconds to the seconds passed in the command.</p>
</div>
<div class="paragraph">
<p>Currently, only setting grace-period=0 is supported.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Note: Force restart can cause data corruption, and should be used in cases of kernal panic or VirtualMachine being unresponsive to normal restarts.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect3">
<h4 id="fencing-considerations"><a class="anchor" href="#fencing-considerations"></a>Fencing considerations</h4>
<div class="paragraph">
<p>A VirtualMachine will never restart or re-create a
VirtualMachineInstance until the current instance of the
VirtualMachineInstance is deleted from the cluster.</p>
</div>
</div>
<div class="sect3">
<h4 id="exposing-as-a-service"><a class="anchor" href="#exposing-as-a-service"></a>Exposing as a Service</h4>
<div class="paragraph">
<p>A VirtualMachine can be exposed as a service. The actual service will be
available once the VirtualMachineInstance starts without additional
interaction.</p>
</div>
<div class="paragraph">
<p>For example, exposing SSH port (22) as a <code>ClusterIP</code> service using
<code>virtctl</code> after the OfflineVirtualMAchine was created, but before it
started:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ virtctl expose virtualmachine vmi-ephemeral --name vmiservice --port 27017 --target-port 22</code></pre>
</div>
</div>
<div class="paragraph">
<p>All service exposure options that apply to a VirtualMachineInstance
apply to a VirtualMachine. See
<a href="../using-virtual-machines/expose-service.html">Exposing VirtualMachineInstance</a> for more details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="when-to-use-a-virtualmachine"><a class="anchor" href="#when-to-use-a-virtualmachine"></a>When to use a VirtualMachine</h3>
<div class="sect3">
<h4 id="when-abi-stability-is-required-between-restarts"><a class="anchor" href="#when-abi-stability-is-required-between-restarts"></a>When ABI stability is required between restarts</h4>
<div class="paragraph">
<p>A <em>VirtualMachine</em> makes sure that VirtualMachineInstance ABI
configurations are consistent between restarts. A classical example are
licenses which are bound to the firmware UUID of a virtual machine. The
<em>VirtualMachine</em> makes sure that the UUID will always stay the same
without the user having to take care of it.</p>
</div>
<div class="paragraph">
<p>One of the main benefits is that a user can still make use of defaulting
logic, although a stable ABI is needed.</p>
</div>
</div>
<div class="sect3">
<h4 id="when-config-updates-should-be-picked-up-on-the-next-restart"><a class="anchor" href="#when-config-updates-should-be-picked-up-on-the-next-restart"></a>When config updates should be picked up on the next restart</h4>
<div class="paragraph">
<p>If the VirtualMachineInstance configuration should be modifyable inside
the cluster and these changes should be picked up on the next
VirtualMachineInstance restart. This means that no hotplug is involved.</p>
</div>
<div class="paragraph">
<p>When you want to let the cluster manage your individual
VirtualMachineInstance
<sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup><sup>^</sup></p>
</div>
<div class="paragraph">
<p>Kubernetes as a declarative system can help you to manage the
VirtualMachineInstance.</p>
</div>
<div class="paragraph">
<p>You tell it that you want this VirtualMachineInstance with your
application running, the VirtualMachine will try to make sure it stays
running.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Note</strong>: The current believe is that if it is defined that the
VirtualMachineInstance should be running, it should be running. This is
different to many classical virtualization platforms, where VMs stay
down if they were switched off. Restart policies may be added if needed.
Please provide your use-case if you need this!</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example"><a class="anchor" href="#example"></a>Example</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha3</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachine</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">kubevirt.io/vm</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">vm-cirros</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">vm-cirros</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">running</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">false</span></span>
  <span style="color:#606">template</span>:
    <span style="color:#606">metadata</span>:
      <span style="color:#606">labels</span>:
        <span style="color:#606">kubevirt.io/vm</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">vm-cirros</span></span>
    <span style="color:#606">spec</span>:
      <span style="color:#606">domain</span>:
        <span style="color:#606">devices</span>:
          <span style="color:#606">disks</span>:
          - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">disk:</span><span style="color:#D20">
              bus: virtio</span></span>
            <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">containerdisk</span></span>
          - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">disk:</span><span style="color:#D20">
              bus: virtio</span></span>
            <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cloudinitdisk</span></span>
        <span style="color:#606">machine</span>:
          <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span>
        <span style="color:#606">resources</span>:
          <span style="color:#606">requests</span>:
            <span style="color:#606">memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">64M</span></span>
      <span style="color:#606">terminationGracePeriodSeconds</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">0</span></span>
      <span style="color:#606">volumes</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: containerdisk</span></span>
        <span style="color:#606">containerDisk</span>:
          <span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt/cirros-container-disk-demo:latest</span></span>
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cloudInitNoCloud:</span><span style="color:#D20">
          userDataBase64: IyEvYmluL3NoCgplY2hvICdwcmludGVkIGZyb20gY2xvdWQtaW5pdCB1c2VyZGF0YScK</span></span>
        <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cloudinitdisk</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Saving this manifest into <code>vm.yaml</code> and submitting it to Kubernetes will
create the controller instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ kubectl create -f vm.yaml
virtualmachine &quot;vm-cirros&quot; created</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since <code>spec.running</code> is set to <code>false</code>, no vmi will be created:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ kubectl get vmis
No resources found.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Letâ€™s start the VirtualMachine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ virtctl start omv vm-cirros</code></pre>
</div>
</div>
<div class="paragraph">
<p>As expected, a VirtualMachineInstance called <code>vm-cirros</code> got created:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#F00;background-color:#FAA">$ kubectl describe vm vm-cirros</span>
<span style="color:#606">Name</span>:         <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">vm-cirros</span></span>
<span style="color:#606">Namespace</span>:    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default</span></span>
<span style="color:#606">Labels</span>:       <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/vm=vm-cirros</span></span>
<span style="color:#606">Annotations</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">&lt;none&gt;</span></span>
<span style="color:#606">API Version</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha3</span></span>
<span style="color:#606">Kind</span>:         <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachine</span></span>
<span style="color:#606">Metadata</span>:
  <span style="color:#606">Cluster Name</span>:
  <span style="color:#606">Creation Timestamp</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">2018-04-30T09:25:08Z</span></span>
  <span style="color:#606">Generation</span>:          <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">0</span></span>
  <span style="color:#606">Resource Version</span>:    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">6418</span></span>
  <span style="color:#606">Self Link</span>:           <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/apis/kubevirt.io/v1alpha3/namespaces/default/virtualmachines/vm-cirros</span></span>
  <span style="color:#606">UID</span>:                 <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">60043358-4c58-11e8-8653-525500d15501</span></span>
<span style="color:#606">Spec</span>:
  <span style="color:#606">Running</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
  <span style="color:#606">Template</span>:
    <span style="color:#606">Metadata</span>:
      <span style="color:#606">Creation Timestamp</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">&lt;nil&gt;</span></span>
      <span style="color:#606">Labels</span>:
        <span style="color:#606">Kubevirt . Io / Ovmi</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">vm-cirros</span></span>
    <span style="color:#606">Spec</span>:
      <span style="color:#606">Domain</span>:
        <span style="color:#606">Devices</span>:
          <span style="color:#606">Disks</span>:
            <span style="color:#606">Disk</span>:
              <span style="color:#606">Bus</span>:        <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">virtio</span></span>
            <span style="color:#606">Name</span>:         <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">containerdisk</span></span>
            <span style="color:#606">Volume Name</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">containerdisk</span></span>
            <span style="color:#606">Disk</span>:
              <span style="color:#606">Bus</span>:        <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">virtio</span></span>
            <span style="color:#606">Name</span>:         <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cloudinitdisk</span></span>
            <span style="color:#606">Volume Name</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cloudinitdisk</span></span>
        <span style="color:#606">Machine</span>:
          <span style="color:#606">Type</span>:
        <span style="color:#606">Resources</span>:
          <span style="color:#606">Requests</span>:
            <span style="color:#606">Memory</span>:                      <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">64M</span></span>
      <span style="color:#606">Termination Grace Period Seconds</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">0</span></span>
      <span style="color:#606">Volumes</span>:
        <span style="color:#606">Name</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">containerdisk</span></span>
        <span style="color:#606">Registry Disk</span>:
          <span style="color:#606">Image</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt/cirros-registry-disk-demo:latest</span></span>
        <span style="color:#606">Cloud Init No Cloud</span>:
          <span style="color:#606">User Data Base 64</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IyEvYmluL3NoCgplY2hvICdwcmludGVkIGZyb20gY2xvdWQtaW5pdCB1c2VyZGF0YScK</span></span>
        <span style="color:#606">Name</span>:                 <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cloudinitdisk</span></span>
<span style="color:#606">Status</span>:
  <span style="color:#606">Created</span>:  <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
  <span style="color:#606">Ready</span>:    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
<span style="color:#606">Events</span>:
  <span style="color:#F00;background-color:#FAA">Type    Reason            Age   From                              Message</span>
  <span style="color:#F00;background-color:#FAA">----    ------            ----  ----                              -------</span>
  <span style="color:#606">Normal  SuccessfulCreate  15s   virtualmachine-controller  Created virtual machine</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">vm-cirros</span></span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="kubectl-commandline-interactions"><a class="anchor" href="#kubectl-commandline-interactions"></a>kubectl commandline interactions</h4>
<div class="paragraph">
<p>Whenever you want to manipulate the VirtualMachine through the
commandline you can use the kubectl command. The following are examples
demonstrating how to do it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># Define a virtual machine:
kubectl create -f myvm.yaml

# Start the virtual machine:
kubectl patch virtualmachine myvm --type merge -p \
    '{&quot;spec&quot;:{&quot;running&quot;:true}}'

# Look at virtual machine status and associated events:
kubectl describe virtualmachine myvm

# Look at the now created virtual machine instance status and associated events:
kubectl describe virtualmachineinstance myvm

# Stop the virtual machine instance:
kubectl patch virtualmachine myvm --type merge -p \
    '{&quot;spec&quot;:{&quot;running&quot;:false}}'

# Restart the virtual machine (you delete the instance!):
kubectl delete virtualmachineinstance myvm

# Implicit cascade delete (first deletes the virtual machine and then the virtual machine)
kubectl delete virtualmachine myvm

# Explicit cascade delete (first deletes the virtual machine and then the virtual machine)
kubectl delete virtualmachine myvm --cascade=true

# Orphan delete (The running virtual machine is only detached, not deleted)
# Recreating the virtual machine would lead to the adoption of the virtual machine instance
kubectl delete virtualmachine myvm --cascade=false</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
   <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
   <!-- Latest compiled and minified JavaScript -->
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
   <script src="../../latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
   <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>KubeVirt Latest | Using Virtual Machines | Virtual Machine Replica Set</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

    <link href="../../latest/_stylesheets/asciibinder.css" rel="stylesheet" />

   <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
   <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
   <!--[if lt IE 9]>
     <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
     <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
   <![endif]-->

  <link href="../../latest/_images/favicon32x32.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="../../latest/_images/favicon.ico"><![endif]-->
  <meta content="AsciiBinder" name="application-name">
</head>
<body>
  <div class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="https://kubevirt.io/"><img alt="Kubevirt" height="64px" src="../../latest/_images/KubeVirt_icon.png"></a>
      </div>
    </div>
  </div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../index.html">Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../welcome/index.html">KubeVirt Latest</a>
      </li>
      <li class="hidden-xs active">
        <a href="../using-virtual-machines/usage.html">Using Virtual Machines</a>
      </li>
      
      <li class="hidden-xs active">
        Virtual Machine Replica Set
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>Welcome
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>Release Notes
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../release-notes/changelog.html">Changelog</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../architecture/virtual-machine.html">Virtual Machines</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Installation & Administration
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../administration/intro.html">Installation</a></li>
            <li><a class="" href="../administration/api-validation.html">Webhooks</a></li>
            <li><a class="" href="../administration/authorization.html">Authorization</a></li>
            <li><a class="" href="../administration/monitoring.html">Monitoring</a></li>
            <li><a class="" href="../administration/annotations_and_labels.html">Annotations and Labels</a></li>
            <li><a class="" href="../administration/unresponsive-nodes.html">Unresponsive node handling</a></li>
            <li><a class="" href="../administration/node-eviction.html">Node eviciton</a></li>
            <li><a class="" href="../administration/image-upload.html">Image upload</a></li>
            <li><a class="" href="../administration/live-migration.html">Live Migration</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-right"></span>Creating Virtual Machines
      </a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../creating-virtual-machines/intro.html">Introduction</a></li>
            <li><a class="" href="../creating-virtual-machines/virtualized-hardware-configuration.html">Devices</a></li>
            <li><a class="" href="../creating-virtual-machines/disks-and-volumes.html">Disks and Volumes</a></li>
            <li><a class="" href="../creating-virtual-machines/interfaces-and-networks.html">Interfaces and Networks</a></li>
            <li><a class="" href="../creating-virtual-machines/dedicated-cpu.html">Guaranteed CPU usage</a></li>
            <li><a class="" href="../creating-virtual-machines/startup-scripts.html">cloud-init</a></li>
            <li><a class="" href="../creating-virtual-machines/guest-operating-system-information.html">Associating Guest Informations</a></li>
            <li><a class="" href="../creating-virtual-machines/virtio-win.html">virtio drivers for Microsoft Windows</a></li>
            <li><a class="" href="../creating-virtual-machines/presets.html">Presets</a></li>
            <li><a class="" href="../creating-virtual-machines/probes.html">Probes</a></li>
            <li><a class="" href="../creating-virtual-machines/run-strategies.html">Run Strategies</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-down"></span>Using Virtual Machines
      </a>
      <ul id="topicGroup5" class="collapse in list-unstyled">
            <li><a class="" href="../using-virtual-machines/usage.html">Usage</a></li>
            <li><a class="" href="../using-virtual-machines/life-cycle.html">Starting and Stopping</a></li>
            <li><a class="" href="../using-virtual-machines/graphical-and-console-access.html">Console Access (Serial and Graphical)</a></li>
            <li><a class="" href="../using-virtual-machines/assigning-vms-to-nodes.html">Node placement</a></li>
            <li><a class="" href="../using-virtual-machines/dns.html">DNS Integration</a></li>
            <li><a class="" href="../using-virtual-machines/expose-service.html">Service Integration</a></li>
            <li><a class="" href="../using-virtual-machines/create-networkpolicy.html">Assigning Network Policies</a></li>
            <li><a class="" href="../using-virtual-machines/overcommit.html">Memory over-commit</a></li>
            <li><a class=" active" href="../using-virtual-machines/virtual-machine-replica-set.html">Virtual Machine Replica Set</a></li>
            <li><a class="" href="../using-virtual-machines/vmctl.html">vmctl</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-right"></span>Working with Templates
      </a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../templates/common-templates.html">Introduction</a></li>
            <li><a class="" href="../templates/using-templates.html">Using templates</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup7">
        <span id="tgSpan7" class="fa fa-angle-right"></span>Web Interface
      </a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../web-interface/web-interface.html">Web Interface</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>VirtualMachineInstanceReplicaSet</h2>
        </div>
        <div class="sect1">
<h2 id="virtualmachineinstancereplicaset"><a class="anchor" href="#virtualmachineinstancereplicaset"></a>VirtualMachineInstanceReplicaSet</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="virtualmachineinstancereplicaset-2"><a class="anchor" href="#virtualmachineinstancereplicaset-2"></a>VirtualMachineInstanceReplicaSet</h3>
<div class="paragraph">
<p>A <em>VirtualMachineInstanceReplicaSet</em> tries to ensures that a specified
number of VirtualMachineInstance replicas are running at any time. In
other words, a <em>VirtualMachineInstanceReplicaSet</em> makes sure that a
VirtualMachineInstance or a homogeneous set of VirtualMachineInstances
is always up and ready. It is very similar to a
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/">Kubernetes
ReplicaSet</a>.</p>
</div>
<div class="paragraph">
<p>No state is kept and no guarantees about the maximum number of
VirtualMachineInstance replicas which are up are given. For example, the
<em>VirtualMachineInstanceReplicaSet</em> may decide to create new replicas if
possibly still running VMs are entering an unknown state.</p>
</div>
</div>
<div class="sect2">
<h3 id="how-to-use-a-virtualmachineinstancereplicaset"><a class="anchor" href="#how-to-use-a-virtualmachineinstancereplicaset"></a>How to use a VirtualMachineInstanceReplicaSet</h3>
<div class="paragraph">
<p>The <em>VirtualMachineInstanceReplicaSet</em> allows us to specify a
<em>VirtualMachineInstanceTemplate</em> in <code>spec.template</code>. It consists of
<code>ObjectMetadata</code> in <code>spec.template.metadata</code>, and a
<code>VirtualMachineInstanceSpec</code> in <code>spec.template.spec</code>. The specification
of the virtual machine is equal to the specification of the virtual
machine in the <code>VirtualMachineInstance</code> workload.</p>
</div>
<div class="paragraph">
<p><code>spec.replicas</code> can be used to specify how many replicas are wanted. If
unspecified, the default value is 1. This value can be updated anytime.
The controller will react to the changes.</p>
</div>
<div class="paragraph">
<p><code>spec.selector</code> is used by the controller to keep track of managed
virtual machines. The selector specified there must be able to match the
virtual machine labels as specified in <code>spec.template.metadata.labels</code>.
If the selector does not match these labels, or they are empty, the
controller will simply do nothing except from logging an error. The user
is responsible for not creating other virtual machines or
<em>VirtualMachineInstanceReplicaSets</em> which conflict with the selector and
the template labels.</p>
</div>
</div>
<div class="sect2">
<h3 id="exposing-a-virtualmachineinstancereplicaset-as-a-service"><a class="anchor" href="#exposing-a-virtualmachineinstancereplicaset-as-a-service"></a>Exposing a VirtualMachineInstanceReplicaSet as a Service</h3>
<div class="paragraph">
<p>A VirtualMachineInstanceReplicaSet could be exposed as a service. When
this is done, one of the VirtualMachineInstances replicas will be picked
for the actual delivery of the service.</p>
</div>
<div class="paragraph">
<p>For example, exposing SSH port (22) as a ClusterIP service using virtctl
on a VirtualMachineInstanceReplicaSet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ virtctl expose vmirs vmi-ephemeral --name vmiservice --port 27017 --target-port 22</code></pre>
</div>
</div>
<div class="paragraph">
<p>All service exposure options that apply to a VirtualMachineInstance
apply to a VirtualMachineInstanceReplicaSet. See
<a href="http://kubevirt.io/user-guide/#/workloads/virtual-machines/expose-service">Exposing
VirtualMachineInstance</a> for more details.</p>
</div>
</div>
<div class="sect2">
<h3 id="when-to-use-a-virtualmachineinstancereplicaset"><a class="anchor" href="#when-to-use-a-virtualmachineinstancereplicaset"></a>When to use a VirtualMachineInstanceReplicaSet</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Note:</strong> The base assumption is that referenced disks are read-only or
that the VMIs are writing internally to a tmpfs. The most obvious volume
sources for VirtualMachineInstanceReplicaSets which KubeVirt supports
are referenced below. If other types are used <strong>data corruption</strong> is
possible.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Using VirtualMachineInstanceReplicaSet is the right choice when one
wants many identical VMs and does not care about maintaining any disk
state after the VMs are terminated.</p>
</div>
<div class="paragraph">
<p><a href="workloads/virtual-machines/disks-and-volumes.md">Volume types</a> which
work well in combination with a VirtualMachineInstanceReplicaSet are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>cloudInitNoCloud</strong></p>
</li>
<li>
<p><strong>ephemeral</strong></p>
</li>
<li>
<p><strong>containerDisk</strong></p>
</li>
<li>
<p><strong>emptyDisk</strong></p>
</li>
<li>
<p><strong>configMap</strong></p>
</li>
<li>
<p><strong>secret</strong></p>
</li>
<li>
<p>any other type, if the VMI writes internally to a tmpfs</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="fast-starting-ephemeral-virtual-machines"><a class="anchor" href="#fast-starting-ephemeral-virtual-machines"></a>Fast starting ephemeral Virtual Machines</h4>
<div class="paragraph">
<p>This use-case involves small and fast booting VMs with little
provisioning performed during initialization.</p>
</div>
<div class="paragraph">
<p>In this scenario, migrations are not important. Redistributing VM
workloads between Nodes can be achieved simply by deleting managed
VirtualMachineInstances which are running on an overloaded Node. The
<code>eviction</code> of such a VirtualMachineInstance can happen by directly
deleting the VirtualMachineInstance instance (KubeVirt aware workload
redistribution) or by deleting the corresponding Pod where the Virtual
Machine runs in (Only Kubernetes aware workload redistribution).</p>
</div>
</div>
<div class="sect3">
<h4 id="slow-starting-ephemeral-virtual-machines"><a class="anchor" href="#slow-starting-ephemeral-virtual-machines"></a>Slow starting ephemeral Virtual Machines</h4>
<div class="paragraph">
<p>In this use-case one has big and slow booting VMs, and complex or
resource intensive provisioning is done during boot. More specifically,
the timespan between the creation of a new VM and it entering the ready
state is long.</p>
</div>
<div class="paragraph">
<p>In this scenario, one still does not care about the state, but since
re-provisioning VMs is expensive, migrations are important. Workload
redistribution between Nodes can be achieved by migrating
VirtualMachineInstances to different Nodes. A workload redistributor
needs to be aware of KubeVirt and create migrations, instead of
<code>evicting</code> VirtualMachineInstances by deletion.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Note:</strong> The simplest form of having a migratable ephemeral
VirtualMachineInstance, will be to use local storage based on
<code>ContainerDisks</code> in combination with a file based backing store.
However, migratable backing store support has not officially landed yet
in KubeVirt and is untested.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect2">
<h3 id="example"><a class="anchor" href="#example"></a>Example</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha3</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstanceReplicaSet</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">testreplicaset</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">replicas</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">3</span></span>
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchLabels</span>:
      <span style="color:#606">myvmi</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvmi</span></span>
  <span style="color:#606">template</span>:
    <span style="color:#606">metadata</span>:
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">test</span></span>
      <span style="color:#606">labels</span>:
        <span style="color:#606">myvmi</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvmi</span></span>
    <span style="color:#606">spec</span>:
      <span style="color:#606">domain</span>:
        <span style="color:#606">devices</span>:
          <span style="color:#606">disks</span>:
          - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">disk:</span></span>
            <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">containerdisk</span></span>
        <span style="color:#606">resources</span>:
          <span style="color:#606">requests</span>:
            <span style="color:#606">memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">64M</span></span>
      <span style="color:#606">volumes</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: containerdisk</span></span>
        <span style="color:#606">containerDisk</span>:
          <span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt/cirros-container-disk-demo:latest</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Saving this manifest into <code>testreplicaset.yaml</code> and submitting it to
Kubernetes will create three virtual machines based on the template.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ kubectl create -f testreplicaset.yaml
virtualmachineinstancereplicaset &quot;testreplicaset&quot; created
$ kubectl describe vmirs testreplicaset
Name:         testreplicaset
Namespace:    default
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;
API Version:  kubevirt.io/v1alpha3
Kind:         VirtualMachineInstanceReplicaSet
Metadata:
  Cluster Name:
  Creation Timestamp:  2018-01-03T12:42:30Z
  Generation:          0
  Resource Version:    6380
  Self Link:           /apis/kubevirt.io/v1alpha3/namespaces/default/virtualmachineinstancereplicasets/testreplicaset
  UID:                 903a9ea0-f083-11e7-9094-525400ee45b0
Spec:
  Replicas:  3
  Selector:
    Match Labels:
      Myvmi:  myvmi
  Template:
    Metadata:
      Creation Timestamp:  &lt;nil&gt;
      Labels:
        Myvmi:  myvmi
      Name:    test
    Spec:
      Domain:
        Devices:
          Disks:
            Disk:
            Name:         containerdisk
            Volume Name:  containerdisk
        Resources:
          Requests:
            Memory:  64M
      Volumes:
        Name:  containerdisk
        Container Disk:
          Image:  kubevirt/cirros-container-disk-demo:latest
Status:
  Conditions:      &lt;nil&gt;
  Ready Replicas:  2
  Replicas:        3
Events:
  Type    Reason            Age   From                                 Message
  ----    ------            ----  ----                                 -------
  Normal  SuccessfulCreate  13s   virtualmachineinstancereplicaset-controller  Created virtual machine: testh8998
  Normal  SuccessfulCreate  13s   virtualmachineinstancereplicaset-controller  Created virtual machine: testf474w
  Normal  SuccessfulCreate  13s   virtualmachineinstancereplicaset-controller  Created virtual machine: test5lvkd</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Replicas</code> is <code>3</code> and <code>Ready Replicas</code> is <code>2</code>. This means that at the
moment when showing the status, three Virtual Machines were already
created, but only two are running and ready.</p>
</div>
</div>
<div class="sect2">
<h3 id="scaling-via-the-scale-subresource"><a class="anchor" href="#scaling-via-the-scale-subresource"></a>Scaling via the Scale Subresource</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Note:</strong> This requires the <code>CustomResourceSubresources</code> feature gate to be
enables for clusters prior to 1.11.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The <code>VirtualMachineInstanceReplicaSet</code> supports the <code>scale</code> subresource. As a
consequence it is possible to scale it via <code>kubectl</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ kubectl scale vmirs myvmirs --replicas 5</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-the-horizontal-pod-autoscaler"><a class="anchor" href="#using-the-horizontal-pod-autoscaler"></a>Using the Horizontal Pod Autoscaler</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Note:</strong> This requires at cluster newer or equal to 1.11.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The <a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/">HorizontalPodAutoscaler</a> (HPA) can be used with a
<code>VirtualMachineInstanceReplicaSet</code>. Simply reference it in the spec of the
autoscaler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">autoscaling/v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">HorizontalPodAutoscaler</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myhpa</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">scaleTargetRef</span>:
    <span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachineInstanceReplicaSet</span></span>
    <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">vmi-replicaset-cirros</span></span>
    <span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubevirt.io/v1alpha3</span></span>
  <span style="color:#606">minReplicas</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">3</span></span>
  <span style="color:#606">maxReplicas</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">10</span></span>
  <span style="color:#606">targetCPUUtilizationPercentage</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">50</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Right now <code>kubectl autoscale</code> does not work with Custom Resources. Only the
declarative form of writing the HPA yaml manually and posting it via <code>kubectl
create</code> is supported.</p>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
   <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
   <!-- Latest compiled and minified JavaScript -->
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
   <script src="../../latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
   <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
</body>
</html>